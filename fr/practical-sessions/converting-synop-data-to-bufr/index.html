
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/fr/practical-sessions/converting-synop-data-to-bufr/">
      
      
        <link rel="prev" href="../converting-synop-data-to-bufr-form/">
      
      
        <link rel="next" href="../csv2bufr-templates/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Conversion des données SYNOP en BUFR - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#conversion-des-donnees-synop-en-bufr-depuis-la-ligne-de-commande" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Conversion des données SYNOP en BUFR
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/converting-synop-data-to-bufr/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/converting-synop-data-to-bufr/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/converting-synop-data-to-bufr/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/converting-synop-data-to-bufr/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Aide-mémoire
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Aide-mémoire
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modèles csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modèles csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sessions pratiques
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sessions pratiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connexion à WIS2 via MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accéder à votre VM étudiant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initialisation de wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des jeux de données dans wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des métadonnées des stations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion de données pour publication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils de conversion de données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèles de mappage de CSV à BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ajout d'en-têtes GTS aux notifications WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration d'un ensemble de données recommandé avec contrôle d'accès
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Téléchargement et décodage des données depuis WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Découverte de jeux de données depuis le Catalogue de Découverte Global WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Préparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synop2bufr-primer" class="md-nav__link">
    <span class="md-ellipsis">
      synop2bufr primer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="synop2bufr primer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transform" class="md-nav__link">
    <span class="md-ellipsis">
      transform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eccodes-primer" class="md-nav__link">
    <span class="md-ellipsis">
      ecCodes primer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ecCodes primer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bufr_dump" class="md-nav__link">
    <span class="md-ellipsis">
      bufr_dump
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-des-rapports-synop-fm-12-en-bufr-en-utilisant-synop2bufr-depuis-la-ligne-de-commande" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion des rapports SYNOP FM-12 en BUFR en utilisant synop2bufr depuis la ligne de commande
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversion des rapports SYNOP FM-12 en BUFR en utilisant synop2bufr depuis la ligne de commande">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercice-1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercice-2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercice-3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercice-4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercice-5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 5
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="conversion-des-donnees-synop-en-bufr-depuis-la-ligne-de-commande">Conversion des données SYNOP en BUFR depuis la ligne de commande</h1>
<div class="admonition abstract">
<p class="admonition-title">Résultats d'apprentissage</p>
<p>À la fin de cette session pratique, vous serez capable de :</p>
<ul>
<li>utiliser l'outil synop2bufr pour convertir les rapports SYNOP FM-12 en BUFR ;</li>
<li>diagnostiquer et corriger les erreurs de codage simples dans les rapports SYNOP FM-12 avant la conversion de format ;</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>Les rapports météorologiques de surface provenant des stations terrestres ont historiquement été rapportés chaque heure ou aux heures synoptiques principales
(00, 06, 12 et 18 UTC) et intermédiaires (03, 09, 15, 21 UTC). Avant la migration
vers le BUFR, ces rapports étaient codés dans le format de code SYNOP FM-12 en texte brut. Bien que la migration vers le BUFR
devait être achevée en 2012, un grand nombre de rapports sont encore échangés dans l'ancien format
SYNOP FM-12. Des informations supplémentaires sur le format SYNOP FM-12 peuvent être trouvées dans le Manuel des Codes de l'OMM, 
Volume I.1 (OMM-No. 306, Volume I.1).</p>
<p><a href="https://library.wmo.int/records/item/35713-manual-on-codes-international-codes-volume-i-1">Manuel des Codes de l'OMM, Volume I.1</a></p>
<p>Pour aider à compléter la migration vers le BUFR, certains outils ont été développés pour
encoder les rapports SYNOP FM-12 en BUFR, dans cette session vous apprendrez à utiliser ces outils ainsi
que la relation entre les informations contenues dans les rapports SYNOP FM-12 et les messages BUFR.</p>
<h2 id="preparation">Préparation</h2>
<div class="admonition warning">
<p class="admonition-title">Prérequis</p>
<ul>
<li>Assurez-vous que votre wis2box a été configuré et démarré.</li>
<li>Confirmez le statut en visitant l'API wis2box (<code>http://&lt;votre-nom-d'hôte&gt;/oapi</code>) et en vérifiant que l'API fonctionne.</li>
<li>Assurez-vous de lire les sections <strong>synop2bufr primer</strong> et <strong>ecCodes primer</strong> avant de commencer les exercices.</li>
</ul>
</div>
<h2 id="synop2bufr-primer">synop2bufr primer</h2>
<p>Ci-dessous, les commandes et configurations essentielles de <code>synop2bufr</code> :</p>
<h3 id="transform">transform</h3>
<p>La fonction <code>transform</code> convertit un message SYNOP en BUFR :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>my_file.csv<span class="w"> </span>--output-dir<span class="w"> </span>./my_directory<span class="w"> </span>--year<span class="w"> </span>message_year<span class="w"> </span>--month<span class="w"> </span>message_month<span class="w"> </span>my_SYNOP.txt
</code></pre></div>
<p>Notez que si les options de métadonnées, de répertoire de sortie, d'année et de mois ne sont pas spécifiées, elles prendront leurs valeurs par défaut :</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Défaut</th>
</tr>
</thead>
<tbody>
<tr>
<td>--metadata</td>
<td>station_list.csv</td>
</tr>
<tr>
<td>--output-dir</td>
<td>Le répertoire de travail actuel.</td>
</tr>
<tr>
<td>--year</td>
<td>L'année en cours.</td>
</tr>
<tr>
<td>--month</td>
<td>Le mois en cours.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il faut être prudent en utilisant l'année et le mois par défaut, car le jour du mois spécifié dans le rapport peut ne pas correspondre (par exemple, juin n'a pas 31 jours).</p>
</div>
<p>Dans les exemples, l'année et le mois ne sont pas donnés, alors n'hésitez pas à spécifier une date vous-même ou à utiliser les valeurs par défaut.</p>
<h2 id="eccodes-primer">ecCodes primer</h2>
<p>ecCodes fournit à la fois des outils en ligne de commande et peut être intégré dans vos propres applications. Ci-dessous, quelques utilitaires en ligne de commande utiles pour travailler avec les données BUFR.</p>
<h3 id="bufr_dump">bufr_dump</h3>
<p>La commande <code>bufr_dump</code> est un outil générique d'information BUFR. Elle possède de nombreuses options, mais les suivantes seront les plus applicables aux exercices :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4
</code></pre></div>
<p>Cela affichera le contenu BUFR sur votre écran. Si vous êtes intéressé par les valeurs prises par une variable en particulier, utilisez la commande <code>egrep</code> :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span>temperature
</code></pre></div>
<p>Cela affichera les variables liées à la température dans vos données BUFR. Si vous souhaitez faire cela pour plusieurs types de variables, filtrez la sortie en utilisant un pipe (<code>|</code>) :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature|wind&#39;</span>
</code></pre></div>
<h2 id="conversion-des-rapports-synop-fm-12-en-bufr-en-utilisant-synop2bufr-depuis-la-ligne-de-commande">Conversion des rapports SYNOP FM-12 en BUFR en utilisant synop2bufr depuis la ligne de commande</h2>
<p>La bibliothèque eccodes et le module synop2bufr sont installés dans le conteneur wis2box-api. Afin de réaliser les prochains exercices, nous copierons le répertoire synop2bufr-exercises dans le conteneur wis2box-api et exécuterons les exercices à partir de là.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>cp<span class="w"> </span>~/exercise-materials/synop2bufr-exercises<span class="w"> </span>wis2box-api:/root
</code></pre></div>
<p>Nous pouvons maintenant entrer dans le conteneur et exécuter les exercices :</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>wis2box-api<span class="w"> </span>/bin/bash
</code></pre></div>
<h3 id="exercice-1">Exercice 1</h3>
<p>Naviguez jusqu'au répertoire <code>/root/synop2bufr-exercises/ex_1</code> et inspectez le fichier de message SYNOP message.txt :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_1
more<span class="w"> </span>message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Combien de rapports SYNOP y a-t-il dans ce fichier ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Il y a 1 rapport SYNOP, car il n'y a qu'un seul délimiteur (=) à la fin du message.</p>
</details>
<p>Inspectez la liste des stations :</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Combien de stations sont listées dans la liste des stations ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Il y a 1 station, le fichier station_list.csv contient une ligne de métadonnées de station.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Essayez de convertir <code>message.txt</code> en format BUFR.</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour convertir le message SYNOP en format BUFR, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consultez la section <a href="#synop2bufr-primer">synop2bufr primer</a>.</p>
</div>
<p>Inspectez les données BUFR résultantes en utilisant <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Trouvez comment comparer les valeurs de latitude et de longitude à celles de la liste des stations.</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour comparer les valeurs de latitude et de longitude dans les données BUFR à celles de la liste des stations, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15015_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;latitude|longitude&#39;</span>
</code></pre></div>
<p>Cela affichera les valeurs de latitude et de longitude dans les données BUFR.</p>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consultez la section <a href="#eccodes-primer">ecCodes primer</a>.</p>
</div>
<h3 id="exercice-2">Exercice 2</h3>
<p>Naviguez jusqu'au répertoire <code>exercise-materials/synop2bufr-exercises/ex_2</code> et inspectez le fichier de message SYNOP message.txt :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_2
more<span class="w"> </span>message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Combien de rapports SYNOP y a-t-il dans ce fichier ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Il y a 3 rapports SYNOP, car il y a 3 délimiteurs (=) à la fin du message.</p>
</details>
<p>Inspectez la liste des stations :</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Combien de stations sont listées dans la liste des stations ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Il y a 3 stations, le fichier station_list.csv contient trois lignes de métadonnées de station.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Convertissez <code>message.txt</code> en format BUFR.</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour convertir le message SYNOP en format BUFR, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>En vous basant sur les résultats des exercices dans cette session et la précédente, comment prédiriez-vous le nombre de
fichiers BUFR résultants basé sur le nombre de rapports SYNOP et de stations listées dans le fichier de métadonnées de station ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour voir les fichiers BUFR produits, exécutez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>*.bufr4
</code></pre></div>
<p>Le nombre de fichiers BUFR produits sera égal au nombre de rapports SYNOP dans le fichier de message.</p>
</details>
<p>Inspectez les données BUFR résultantes en utilisant <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Comment pouvez-vous vérifier l'ID de la Station WIGOS encodé à l'intérieur des données BUFR de chaque fichier produit ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Cela peut être fait en utilisant les commandes suivantes :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15015_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15020_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15090_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<p>Notez que si vous avez un répertoire avec juste ces 3 fichiers BUFR, vous pouvez utiliser les jokers Linux comme suit :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>*.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
</details>
<h3 id="exercice-3">Exercice 3</h3>
<p>Naviguez jusqu'au répertoire <code>exercise-materials/synop2bufr-exercises/ex_3</code> et inspectez le fichier de message SYNOP message.txt :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_3
more<span class="w"> </span>message.txt
</code></pre></div>
<p>Ce message SYNOP contient seulement un rapport plus long avec plus de sections.</p>
<p>Inspectez la liste des stations :</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Est-ce problématique que ce fichier contienne plus de stations qu'il n'y a de rapports dans le message SYNOP ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Non, ce n'est pas un problème à condition qu'il existe une ligne dans le fichier de liste des stations avec un TSI de station correspondant à celui du rapport SYNOP que nous essayons de convertir.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le fichier de liste des stations est une source de métadonnées pour <code>synop2bufr</code> afin de fournir les informations manquantes dans le rapport SYNOP alphanumérique et requises dans le SYNOP BUFR.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Convertissez <code>message.txt</code> en format BUFR.</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Ceci est fait en utilisant la commande <code>transform</code>, par exemple :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<p>Inspectez les données BUFR résultantes en utilisant <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Trouvez les variables suivantes :</p>
<ul>
<li>Température de l'air (K) du rapport</li>
<li>Couverture nuageuse totale (%) du rapport</li>
<li>Durée totale d'ensoleillement (minutes) du rapport</li>
<li>Vitesse du vent (m/s) du rapport</li>
</ul>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour trouver les variables par mot-clé dans les données BUFR, vous pouvez utiliser les commandes suivantes :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15260_20240921T115500.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature&#39;</span>
</code></pre></div>
<p>Vous pouvez utiliser la commande suivante pour rechercher plusieurs mots-clés :</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15260_20240921T115500.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature|cover|sunshine|wind&#39;</span>
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Vous pouvez trouver la dernière commande de la section <a href="#eccodes-primer">ecCodes primer</a> utile.</p>
</div>
<h3 id="exercice-4">Exercice 4</h3>
<p>Naviguez jusqu'au répertoire <code>exercise-materials/synop2bufr-exercises/ex_4</code> et inspectez le fichier de message SYNOP message.txt :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_4
more<span class="w"> </span>message_incorrect.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Qu'est-ce qui est incorrect dans ce fichier SYNOP ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Le rapport SYNOP pour 15015 manque le délimiteur (<code>=</code>) qui permet à <code>synop2bufr</code> de distinguer ce rapport du suivant.</p>
</details>
<p>Essayez de convertir <code>message_incorrect.txt</code> en utilisant <code>station_list.csv</code></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quel(s) problème(s) avez-vous rencontré avec cette conversion ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour convertir le message SYNOP en format BUFR, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message_incorrect.txt
</code></pre></div>
<p>Tenter de convertir devrait soulever les erreurs suivantes :</p>
<ul>
<li><code>[ERROR] Impossible de décoder le message SYNOP</code></li>
<li><code>[ERROR] Erreur lors de l'analyse du rapport SYNOP : AAXX 21121 15015 02999 02501 10103 21090 39765 42952 57020 60001 15020 02997 23104 10130 21075 30177 40377 58020 60001 81041. 10130 n'est pas un groupe valide !</code></li>
</ul>
</details>
<h3 id="exercice-5">Exercice 5</h3>
<p>Naviguez jusqu'au répertoire <code>exercise-materials/synop2bufr-exercises/ex_5</code> et inspectez le fichier de message SYNOP message.txt :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_5
more<span class="w"> </span>message.txt
</code></pre></div>
<p>Essayez de convertir <code>message.txt</code> en format BUFR en utilisant <code>station_list_incorrect.csv</code> </p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quel(s) problème(s) avez-vous rencontré avec cette conversion ?<br />
Considérant l'erreur présentée, justifiez le nombre de fichiers BUFR produits.</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour convertir le message SYNOP en format BUFR, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list_incorrect.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
<p>L'un des TSIs de station (<code>15015</code>) n'a pas de métadonnées correspondantes dans la liste des stations, ce qui empêchera synop2bufr d'accéder aux métadonnées supplémentaires nécessaires pour convertir le premier rapport SYNOP en BUFR.</p>
<p>Vous verrez l'avertissement suivant :</p>
<ul>
<li><code>[WARNING] Station 15015 non trouvée dans le fichier de station</code></li>
</ul>
<p>Vous pouvez voir le nombre de fichiers BUFR produits en exécutant la commande suivante :</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>*.bufr4
</code></pre></div>
<p>Il y a 3 rapports SYNOP dans message.txt mais seulement 2 fichiers BUFR ont été produits. Cela est dû au fait qu'un des rapports SYNOP manquait des métadonnées nécessaires comme mentionné ci-dessus.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Félicitations !</p>
<p>Dans cette session pratique, vous avez appris :</p>
<ul>
<li>comment l'outil synop2bufr peut être utilisé pour convertir les rapports SYNOP FM-12 en BUFR ;</li>
<li>comment diagnostiquer et corriger les erreurs de codage simples dans les rapports SYNOP FM-12 avant la conversion de format ;</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>