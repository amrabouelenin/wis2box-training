
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/fr/practical-sessions/connecting-to-wis2-over-mqtt/">
      
      
        <link rel="prev" href="../../">
      
      
        <link rel="next" href="../accessing-your-student-vm/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Connexion à WIS2 via MQTT - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connexion-a-wis2-via-mqtt" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Connexion à WIS2 via MQTT
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/connecting-to-wis2-over-mqtt/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/connecting-to-wis2-over-mqtt/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/connecting-to-wis2-over-mqtt/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/connecting-to-wis2-over-mqtt/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/connecting-to-wis2-over-mqtt/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Aide-mémoire
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Aide-mémoire
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modèles csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modèles csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sessions pratiques
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sessions pratiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Connexion à WIS2 via MQTT
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Connexion à WIS2 via MQTT
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-de-mqtt-explorer-pour-se-connecter-au-global-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation de MQTT Explorer pour se connecter au Global Broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-1-examiner-la-structure-des-sujets-wis2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 1 : Examiner la structure des sujets WIS2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-2-examiner-la-structure-des-messages-wis2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 2 : Examiner la structure des messages WIS2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-3-examiner-la-difference-entre-les-sujets-origin-et-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 3 : Examiner la différence entre les sujets 'origin' et 'cache'
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accéder à votre VM étudiant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initialisation de wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des jeux de données dans wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des métadonnées des stations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion de données pour publication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils de conversion de données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèles de mappage de CSV à BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ajout d'en-têtes GTS aux notifications WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration d'un ensemble de données recommandé avec contrôle d'accès
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Téléchargement et décodage des données depuis WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Découverte de jeux de données depuis le Catalogue de Découverte Global WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-de-mqtt-explorer-pour-se-connecter-au-global-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation de MQTT Explorer pour se connecter au Global Broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-1-examiner-la-structure-des-sujets-wis2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 1 : Examiner la structure des sujets WIS2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-2-examiner-la-structure-des-messages-wis2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 2 : Examiner la structure des messages WIS2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercice-3-examiner-la-difference-entre-les-sujets-origin-et-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Exercice 3 : Examiner la différence entre les sujets 'origin' et 'cache'
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="connexion-a-wis2-via-mqtt">Connexion à WIS2 via MQTT</h1>
<div class="admonition abstract">
<p class="admonition-title">Résultats d'apprentissage</p>
<p>À la fin de cette session pratique, vous serez capable de :</p>
<ul>
<li>vous connecter au Global Broker de WIS2 en utilisant MQTT Explorer</li>
<li>examiner la structure des sujets WIS2</li>
<li>examiner la structure des messages de notification WIS2</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>WIS2 utilise le protocole MQTT pour annoncer la disponibilité des données météorologiques/climatiques/hydrologiques. Le Global Broker de WIS2 s'abonne à tous les WIS2 Nodes du réseau et republie les messages qu'il reçoit. Le Global Cache s'abonne au Global Broker, télécharge les données dans le message puis republie le message sur le sujet <code>cache</code> avec une nouvelle URL. Le Global Discovery Catalogue publie les métadonnées de découverte du Broker et fournit une API de recherche.</p>
<p>Voici un exemple de la structure de message de notification WIS2 pour un message reçu sur le sujet <code>origin/a/wis2/br-inmet/data/core/weather/surface-based-observations/synop</code>: </p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;59f9b013-c4b3-410a-a52d-fff18f3f1b47&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v04&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;coordinates&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="mf">-38.69389</span><span class="p">,</span>
<span class="w">      </span><span class="mf">-17.96472</span><span class="p">,</span>
<span class="w">      </span><span class="mi">60</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;data_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;br-inmet/data/core/weather/surface-based-observations/synop/WIGOS_0-76-2-2900801000W83499_20240815T060000&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;datetime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-08-15T06:00:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pubtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-08-15T09:52:02Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;integrity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sha512&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TBuWycx/G0lIiTo47eFPBViGutxcIyk7eikppAKPc4aHgOmTIS5Wb9+0v3awMOyCgwpFhTruRRCVReMQMp5kYw==&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;base64&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;QlVGUgAA+gQAABYAACsAAAAAAAIAHAAH6AgPBgAAAAALAAABgMGWx1AAAM0ABOIAAAODM0OTkAAAAAAAAAAAAAAKb5oKEpJ6YkJ6mAAAAAAAAAAAAAAAAv0QeYA29WQa87ZhH4CQP//z+P//BD////+ASznXuUb///8MgAS3/////8X///e+AP////AB/+R/yf////////////////////6/1/79H/3///gEt////////4BLP6QAf/+/pAB//4H0YJ/YeAh/f2///7TH/////9+j//f///////////////////v0f//////////////////////wNzc3Nw==&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;wigos_station_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0-76-2-2900801000W83499&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;rel&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;canonical&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/bufr&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://wis2bra.inmet.gov.br/data/2024-08-15/wis/br-inmet/data/core/weather/surface-based-observations/synop/WIGOS_0-76-2-2900801000W83499_20240815T060000.bufr4&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Dans cette session pratique, vous apprendrez à utiliser l'outil MQTT Explorer pour configurer une connexion client MQTT à un Global Broker de WIS2 et à afficher les messages de notification WIS2.</p>
<p>MQTT Explorer est un outil utile pour parcourir et examiner la structure des sujets pour un broker MQTT donné afin de réviser les données publiées.</p>
<p>Notez que MQTT est principalement utilisé pour la communication "machine à machine" ; cela signifie qu'il y aurait normalement un client qui analyse automatiquement les messages au fur et à mesure de leur réception. Pour travailler avec MQTT de manière programmatique (par exemple, en Python), vous pouvez utiliser des bibliothèques clientes MQTT telles que <a href="https://pypi.org/project/paho-mqtt">paho-mqtt</a> pour vous connecter à un broker MQTT et traiter les messages entrants. Il existe de nombreux logiciels clients et serveurs MQTT, en fonction de vos besoins et de votre environnement technique.</p>
<h2 id="utilisation-de-mqtt-explorer-pour-se-connecter-au-global-broker">Utilisation de MQTT Explorer pour se connecter au Global Broker</h2>
<p>Pour visualiser les messages publiés par un Global Broker de WIS2, vous pouvez utiliser "MQTT Explorer" qui peut être téléchargé depuis le <a href="https://mqtt-explorer.com">site web de MQTT Explorer</a>.</p>
<p>Ouvrez MQTT Explorer et ajoutez une nouvelle connexion au Global Broker hébergé par MeteoFrance en utilisant les détails suivants :</p>
<ul>
<li>hôte : globalbroker.meteo.fr</li>
<li>port : 8883</li>
<li>nom d'utilisateur : everyone</li>
<li>mot de passe : everyone</li>
</ul>
<p><img alt="mqtt-explorer-global-broker-connection" src="/../assets/img/mqtt-explorer-global-broker-connection.png" width="800"></p>
<p>Cliquez sur le bouton 'ADVANCED', retirez les sujets préconfigurés et ajoutez les sujets suivants à souscrire :</p>
<ul>
<li><code>origin/a/wis2/#</code></li>
</ul>
<p><img alt="mqtt-explorer-global-broker-advanced" src="/../assets/img/mqtt-explorer-global-broker-sub-origin.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lors de la configuration des abonnements MQTT, vous pouvez utiliser les jokers suivants :</p>
<ul>
<li><strong>Niveau unique (+)</strong> : un joker de niveau unique remplace un niveau de sujet</li>
<li><strong>Niveau multiple (#)</strong> : un joker de niveau multiple remplace plusieurs niveaux de sujet</li>
</ul>
<p>Dans ce cas, <code>origin/a/wis2/#</code> vous abonnera à tous les sujets sous le sujet <code>origin/a/wis2</code>.</p>
</div>
<p>Cliquez sur 'BACK', puis sur 'SAVE' pour enregistrer vos détails de connexion et d'abonnement. Ensuite, cliquez sur 'CONNECT' :</p>
<p>Les messages devraient commencer à apparaître dans votre session MQTT Explorer comme suit :</p>
<p><img alt="mqtt-explorer-global-broker-topics" src="/../assets/img/mqtt-explorer-global-broker-msg-origin.png" width="800"></p>
<p>Vous êtes maintenant prêt à explorer la structure des sujets et des messages WIS2.</p>
<h2 id="exercice-1-examiner-la-structure-des-sujets-wis2">Exercice 1 : Examiner la structure des sujets WIS2</h2>
<p>Utilisez MQTT pour parcourir la structure des sujets sous les sujets <code>origin</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Comment pouvons-nous distinguer le centre WIS qui a publié les données ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Vous pouvez cliquer sur la fenêtre de gauche dans MQTT Explorer pour développer la structure des sujets.</p>
<p>Nous pouvons distinguer le centre WIS qui a publié les données en regardant le quatrième niveau de la structure des sujets. Par exemple, le sujet suivant :</p>
<p><code>origin/a/wis2/br-inmet/data/core/weather/surface-based-observations/synop</code></p>
<p>nous indique que les données ont été publiées par un centre WIS avec l'identifiant de centre <code>br-inmet</code>, qui est l'identifiant de centre pour l'Instituto Nacional de Meteorologia - INMET, Brésil.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Comment pouvons-nous distinguer entre les messages publiés par les centres WIS hébergeant un passerelle GTS-to-WIS2 et les messages publiés par les centres WIS hébergeant un WIS2 Node ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Nous pouvons distinguer les messages provenant de la passerelle GTS-to-WIS2 en regardant l'identifiant de centre dans la structure des sujets. Par exemple, le sujet suivant :</p>
<p><code>origin/a/wis2/de-dwd-gts-to-wis2/data/core/I/S/A/I/01/sbbr</code></p>
<p>nous indique que les données ont été publiées par la passerelle GTS-to-WIS2 hébergée par Deutscher Wetterdienst (DWD), Allemagne. La passerelle GTS-to-WIS2 est un type spécial de diffuseur de données qui publie des données du Système mondial de télécommunication (GTS) vers WIS2. La structure des sujets est composée par les en-têtes TTAAii CCCC pour les messages GTS.</p>
</details>
<h2 id="exercice-2-examiner-la-structure-des-messages-wis2">Exercice 2 : Examiner la structure des messages WIS2</h2>
<p>Déconnectez-vous de MQTT Explorer et mettez à jour les sections 'Advanced' pour changer l'abonnement aux sujets suivants :</p>
<ul>
<li><code>origin/a/wis2/+/data/core/weather/surface-based-observations/synop</code></li>
<li><code>cache/a/wis2/+/data/core/weather/surface-based-observations/synop</code></li>
</ul>
<p><img alt="mqtt-explorer-global-broker-topics-exercise2" src="/../assets/img/mqtt-explorer-global-broker-sub-origin-cache-synop.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le joker <code>+</code> est utilisé pour s'abonner à tous les centres WIS.</p>
</div>
<p>Reconnectez-vous au Global Broker et attendez que les messages apparaissent.</p>
<p>Vous pouvez visualiser le contenu du message WIS2 dans la section "Value" sur le côté droit. Essayez d'élargir la structure des sujets pour voir les différents niveaux du message jusqu'à atteindre le dernier niveau et examinez le contenu du message de l'un des messages.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Comment pouvons-nous identifier le moment où les données ont été publiées ? Et comment pouvons-nous identifier le moment où les données ont été collectées ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Le moment où les données ont été publiées est contenu dans la section <code>properties</code> du message avec une clé de <code>pubtime</code>.</p>
<p>Le moment où les données ont été collectées est contenu dans la section <code>properties</code> du message avec une clé de <code>datetime</code>.</p>
<p><img alt="mqtt-explorer-global-broker-msg-properties" src="/../assets/img/mqtt-explorer-global-broker-msg-properties.png" width="800"></p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Comment pouvons-nous télécharger les données à partir de l'URL fournie dans le message ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>L'URL est contenue dans la section <code>links</code> avec <code>rel="canonical"</code> et définie par la clé <code>href</code>.</p>
<p>Vous pouvez copier l'URL et la coller dans un navigateur web pour télécharger les données.</p>
</details>
<h2 id="exercice-3-examiner-la-difference-entre-les-sujets-origin-et-cache">Exercice 3 : Examiner la différence entre les sujets 'origin' et 'cache'</h2>
<p>Assurez-vous que vous êtes toujours connecté au Global Broker en utilisant les abonnements aux sujets <code>origin/a/wis2/+/data/core/weather/surface-based-observations/synop</code> et <code>cache/a/wis2/+/data/core/weather/surface-based-observations/synop</code> comme décrit dans l'Exercice 2.</p>
<p>Essayez d'identifier un message pour le même identifiant de centre publié à la fois sur les sujets <code>origin</code> et <code>cache</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quelle est la différence entre les messages publiés sur les sujets <code>origin</code> et <code>cache</code> ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Les messages publiés sur les sujets <code>origin</code> sont les messages originaux que le Global Broker republie des WIS2 Nodes du réseau. </p>
<p>Les messages publiés sur les sujets <code>cache</code> sont les messages pour lesquels les données ont été téléchargées par le Global Cache. Si vous vérifiez le contenu du message du sujet commençant par <code>cache</code>, vous verrez que le lien 'canonical' a été mis à jour vers une nouvelle URL.</p>
<p>Il existe plusieurs Global Caches dans le réseau WIS2, donc vous recevrez un message de chaque Global Cache qui a téléchargé le message.</p>
<p>Le Global Cache ne téléchargera et ne republiera que les messages qui ont été publiés sur la hiérarchie des sujets <code>../data/core/...</code>.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Félicitations !</p>
<p>Dans cette session pratique, vous avez appris :</p>
<ul>
<li>comment vous abonner aux services du Global Broker de WIS2 en utilisant MQTT Explorer</li>
<li>la structure des sujets WIS2</li>
<li>la structure des messages de notification WIS2</li>
<li>la différence entre les données de base et les données recommandées</li>
<li>la structure des sujets utilisée par la passerelle GTS-to-WIS2</li>
<li>la différence entre les messages du Global Broker publiés sur les sujets <code>origin</code> et <code>cache</code></li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>