
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/fr/practical-sessions/initializing-wis2box/">
      
      
        <link rel="prev" href="../accessing-your-student-vm/">
      
      
        <link rel="next" href="../configuring-wis2box-datasets/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Initialisation de wis2box - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#initialisation-de-wis2box" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Initialisation de wis2box
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/initializing-wis2box/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/initializing-wis2box/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/initializing-wis2box/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/initializing-wis2box/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/initializing-wis2box/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Aide-mémoire
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Aide-mémoire
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modèles csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modèles csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sessions pratiques
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sessions pratiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connexion à WIS2 via MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accéder à votre VM étudiant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Initialisation de wis2box
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Initialisation de wis2box
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Préparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-de-la-configuration-initiale" class="md-nav__link">
    <span class="md-ellipsis">
      Création de la configuration initiale
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Création de la configuration initiale">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repertoire-wis2box-host-data" class="md-nav__link">
    <span class="md-ellipsis">
      Répertoire wis2box-host-data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url-de-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      URL de wis2box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mots-de-passe-webapp-storage-et-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Mots de passe WEBAPP, STORAGE et BROKER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revision-de-wis2boxenv" class="md-nav__link">
    <span class="md-ellipsis">
      Révision de wis2box.env
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demarrage-de-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Démarrage de wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      API wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-web-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Application web wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-broker" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des jeux de données dans wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des métadonnées des stations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion de données pour publication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils de conversion de données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèles de mappage de CSV à BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ajout d'en-têtes GTS aux notifications WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration d'un ensemble de données recommandé avec contrôle d'accès
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Téléchargement et décodage des données depuis WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Découverte de jeux de données depuis le Catalogue de Découverte Global WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Préparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-de-la-configuration-initiale" class="md-nav__link">
    <span class="md-ellipsis">
      Création de la configuration initiale
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Création de la configuration initiale">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repertoire-wis2box-host-data" class="md-nav__link">
    <span class="md-ellipsis">
      Répertoire wis2box-host-data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url-de-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      URL de wis2box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mots-de-passe-webapp-storage-et-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Mots de passe WEBAPP, STORAGE et BROKER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revision-de-wis2boxenv" class="md-nav__link">
    <span class="md-ellipsis">
      Révision de wis2box.env
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demarrage-de-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Démarrage de wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      API wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-web-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Application web wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-broker" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="initialisation-de-wis2box">Initialisation de wis2box</h1>
<div class="admonition abstract">
<p class="admonition-title">Résultats d'apprentissage</p>
<p>À la fin de cette session pratique, vous serez capable de :</p>
<ul>
<li>exécuter le script <code>wis2box-create-config.py</code> pour créer la configuration initiale</li>
<li>démarrer wis2box et vérifier l'état de ses composants</li>
<li>consulter le contenu de <strong>wis2box-api</strong></li>
<li>accéder à <strong>wis2box-webapp</strong></li>
<li>vous connecter au <strong>wis2box-broker</strong> local en utilisant MQTT Explorer</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les supports de formation actuels sont basés sur wis2box-release 1.0.0.</p>
<p>Consultez <a href="../accessing-your-student-vm/">accessing-your-student-vm</a> pour des instructions sur comment télécharger et installer la pile logicielle wis2box si vous suivez cette formation en dehors d'une session locale.</p>
</div>
<h2 id="preparation">Préparation</h2>
<p>Connectez-vous à votre VM désignée avec votre nom d'utilisateur et votre mot de passe et assurez-vous d'être dans le répertoire <code>wis2box</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
</code></pre></div>
<h2 id="creation-de-la-configuration-initiale">Création de la configuration initiale</h2>
<p>La configuration initiale pour wis2box nécessite :</p>
<ul>
<li>un fichier d'environnement <code>wis2box.env</code> contenant les paramètres de configuration</li>
<li>un répertoire sur la machine hôte à partager entre la machine hôte et les conteneurs wis2box définis par la variable d'environnement <code>WIS2BOX_HOST_DATADIR</code></li>
</ul>
<p>Le script <code>wis2box-create-config.py</code> peut être utilisé pour créer la configuration initiale de votre wis2box.</p>
<p>Il vous posera une série de questions pour aider à configurer votre installation.</p>
<p>Vous pourrez revoir et mettre à jour les fichiers de configuration après que le script ait terminé.</p>
<p>Exécutez le script comme suit :</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-create-config.py
</code></pre></div>
<h3 id="repertoire-wis2box-host-data">Répertoire wis2box-host-data</h3>
<p>Le script vous demandera d'entrer le répertoire à utiliser pour la variable d'environnement <code>WIS2BOX_HOST_DATADIR</code>.</p>
<p>Notez que vous devez définir le chemin complet de ce répertoire.</p>
<p>Par exemple, si votre nom d'utilisateur est <code>username</code>, le chemin complet du répertoire est <code>/home/username/wis2box-data</code> :</p>
<div class="highlight"><pre><span></span><code>username@student-vm-username:~/wis2box$ python3 wis2box-create-config.py
Veuillez entrer le répertoire à utiliser pour WIS2BOX_HOST_DATADIR :
/home/username/wis2box-data
Le répertoire à utiliser pour WIS2BOX_HOST_DATADIR sera défini sur :
    /home/username/wis2box-data
Est-ce correct ? (y/n/exit)
y
Le répertoire /home/username/wis2box-data a été créé.
</code></pre></div>
<h3 id="url-de-wis2box">URL de wis2box</h3>
<p>Ensuite, on vous demandera d'entrer l'URL de votre wis2box. C'est l'URL qui sera utilisée pour accéder à l'application web wis2box, à l'API et à l'UI.</p>
<p>Veuillez utiliser <code>http://&lt;votre-nom-d'hôte-ou-ip&gt;</code> comme URL.</p>
<div class="highlight"><pre><span></span><code>Veuillez entrer l&#39;URL de wis2box :
 Pour les tests locaux, l&#39;URL est http://localhost
 Pour permettre un accès à distance, l&#39;URL doit pointer vers l&#39;adresse IP publique ou le nom de domaine du serveur hébergeant wis2box.
http://username.wis2.training
L&#39;URL de wis2box sera définie sur :
  http://username.wis2.training
Est-ce correct ? (y/n/exit)
</code></pre></div>
<h3 id="mots-de-passe-webapp-storage-et-broker">Mots de passe WEBAPP, STORAGE et BROKER</h3>
<p>Vous pouvez utiliser l'option de génération de mot de passe aléatoire lorsqu'elle vous est proposée pour <code>WIS2BOX_WEBAPP_PASSWORD</code>, <code>WIS2BOX_STORAGE_PASSWORD</code>, <code>WIS2BOX_BROKER_PASSWORD</code> et définir les vôtres.</p>
<p>Ne vous inquiétez pas de retenir ces mots de passe, ils seront stockés dans le fichier <code>wis2box.env</code> dans votre répertoire wis2box.</p>
<h3 id="revision-de-wis2boxenv">Révision de <code>wis2box.env</code></h3>
<p>Une fois les scripts terminés, vérifiez le contenu du fichier <code>wis2box.env</code> dans votre répertoire actuel :</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>~/wis2box/wis2box.env
</code></pre></div>
<p>Ou vérifiez le contenu du fichier via WinSCP.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quelle est la valeur de WISBOX_BASEMAP_URL dans le fichier wis2box.env ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>La valeur par défaut pour WIS2BOX_BASEMAP_URL est <code>https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</code>.</p>
<p>Cette URL fait référence au serveur de tuiles OpenStreetMap. Si vous souhaitez utiliser un autre fournisseur de cartes, vous pouvez changer cette URL pour pointer vers un autre serveur de tuiles.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quelle est la valeur de la variable d'environnement WIS2BOX_STORAGE_DATA_RETENTION_DAYS dans le fichier wis2box.env ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>La valeur par défaut pour WIS2BOX_STORAGE_DATA_RETENTION_DAYS est de 30 jours. Vous pouvez modifier cette valeur pour un nombre différent de jours si vous le souhaitez.</p>
<p>Le conteneur wis2box-management exécute une tâche cron quotidienne pour supprimer les données plus anciennes que le nombre de jours défini par WIS2BOX_STORAGE_DATA_RETENTION_DAYS du seau <code>wis2box-public</code> et de l'API backend :</p>
<div class="highlight"><pre><span></span><code>0 0 * * * su wis2box -c &quot;wis2box data clean --days=$WIS2BOX_STORAGE_DATA_RETENTION_DAYS&quot;
</code></pre></div>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le fichier <code>wis2box.env</code> contient des variables d'environnement définissant la configuration de votre wis2box. Pour plus d'informations, consultez la <a href="https://docs.wis2box.wis.wmo.int/en/latest/reference/configuration.html">wis2box-documentation</a>.</p>
<p>Ne modifiez pas le fichier <code>wis2box.env</code> à moins d'être sûr des modifications que vous apportez. Des modifications incorrectes peuvent entraîner l'arrêt de fonctionnement de votre wis2box.</p>
<p>Ne partagez pas le contenu de votre fichier <code>wis2box.env</code> avec quiconque, car il contient des informations sensibles telles que des mots de passe.</p>
</div>
<h2 id="demarrage-de-wis2box">Démarrage de wis2box</h2>
<p>Assurez-vous d'être dans le répertoire contenant les fichiers de définition de la pile logicielle wis2box :</p>
<div class="highlight"><pre><span></span><code>cd ~/wis2box
</code></pre></div>
<p>Démarrer wis2box avec la commande suivante :</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py start
</code></pre></div>
<p>Lorsque vous exécutez cette commande pour la première fois, vous verrez le message suivant :</p>
<div class="highlight"><pre><span></span><code>Aucun fichier docker-compose.images-*.yml trouvé, en création d&#39;un
Version actuelle=Indéfinie, dernière version=1.0.0
Souhaitez-vous mettre à jour ? (y/n/exit)
</code></pre></div>
<p>Sélectionnez <code>y</code> et le script créera le fichier <code>docker-compose.images-1.0.0.yml</code>, téléchargera les images Docker nécessaires et démarrera les services.</p>
<p>Le téléchargement des images peut prendre du temps en fonction de la vitesse de votre connexion internet. Cette étape n'est nécessaire que la première fois que vous démarrez wis2box.</p>
<p>Inspectez l'état avec la commande suivante :</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py status
</code></pre></div>
<p>Répétez cette commande jusqu'à ce que tous les services soient opérationnels.</p>
<div class="admonition note">
<p class="admonition-title">wis2box et Docker</p>
<p>wis2box fonctionne comme un ensemble de conteneurs Docker gérés par docker-compose.</p>
<p>Les services sont définis dans les différents <code>docker-compose*.yml</code> qui peuvent être trouvés dans le répertoire <code>~/wis2box/</code>.</p>
<p>Le script Python <code>wis2box-ctl.py</code> est utilisé pour exécuter les commandes Docker Compose sous-jacentes qui contrôlent les services wis2box.</p>
<p>Vous n'avez pas besoin de connaître les détails des conteneurs Docker pour exécuter la pile logicielle wis2box, mais vous pouvez inspecter les fichiers <code>docker-compose*.yml</code> pour voir comment les services sont définis. Si vous souhaitez en savoir plus sur Docker, vous pouvez trouver plus d'informations dans la <a href="https://docs.docker.com/">documentation Docker</a>.</p>
</div>
<p>Pour vous connecter au conteneur wis2box-management, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py login
</code></pre></div>
<p>À l'intérieur du conteneur wis2box-management, vous pouvez exécuter diverses commandes pour gérer votre wis2box, telles que :</p>
<ul>
<li><code>wis2box auth add-token --path processes/wis2box</code> : pour créer un jeton d'autorisation pour le point de terminaison <code>processes/wis2box</code></li>
<li><code>wis2box data clean --days=&lt;nombre-de-jours&gt;</code> : pour nettoyer les données plus anciennes qu'un certain nombre de jours du seau <code>wis2box-public</code></li>
</ul>
<p>Pour quitter le conteneur et revenir à la machine hôte, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>exit
</code></pre></div>
<p>Exécutez la commande suivante pour voir les conteneurs docker en cours d'exécution sur votre machine hôte :</p>
<div class="highlight"><pre><span></span><code>docker ps
</code></pre></div>
<p>Vous devriez voir les conteneurs suivants en cours d'exécution :</p>
<ul>
<li>wis2box-management</li>
<li>wis2box-api</li>
<li>wis2box-minio</li>
<li>wis2box-webapp</li>
<li>wis2box-auth</li>
<li>wis2box-ui</li>
<li>wis2downloader</li>
<li>elasticsearch</li>
<li>elasticsearch-exporter</li>
<li>nginx</li>
<li>mosquitto</li>
<li>prometheus</li>
<li>grafana</li>
<li>loki</li>
</ul>
<p>Ces conteneurs font partie de la pile logicielle wis2box et fournissent les différents services nécessaires au fonctionnement de wis2box.</p>
<p>Exécutez la commande suivante pour voir les volumes docker en cours d'exécution sur votre machine hôte :</p>
<div class="highlight"><pre><span></span><code>docker volume ls
</code></pre></div>
<p>Vous devriez voir les volumes suivants :</p>
<ul>
<li>wis2box_project_auth-data</li>
<li>wis2box_project_es-data</li>
<li>wis2box_project_htpasswd</li>
<li>wis2box_project_minio-data</li>
<li>wis2box_project_prometheus-data</li>
<li>wis2box_project_loki-data</li>
<li>wis2box_project_mosquitto-config</li>
</ul>
<p>Ainsi que certains volumes anonymes utilisés par les différents conteneurs.</p>
<p>Les volumes commençant par <code>wis2box_project_</code> sont utilisés pour stocker des données persistantes pour les différents services de la pile logicielle wis2box.</p>
<h2 id="api-wis2box">API wis2box</h2>
<p>wis2box contient une API (Interface de Programmation d'Applications) qui fournit un accès aux données et des processus pour la visualisation interactive, la transformation des données et la publication.</p>
<p>Ouvrez un nouvel onglet et naviguez vers la page <code>http://YOUR-HOST/oapi</code>.</p>
<p><img alt="wis2box-api.png" src="/../assets/img/wis2box-api.png" width="800"></p>
<p>Ceci est la page d'accueil de l'API wis2box (exécutée via le conteneur <strong>wis2box-api</strong>).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quelles collections sont actuellement disponibles ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Pour voir les collections actuellement disponibles via l'API, cliquez sur <code>Voir les collections de ce service</code> :</p>
<p><img alt="wis2box-api-collections.png" src="/../assets/img/wis2box-api-collections.png" width="600"></p>
<p>Les collections suivantes sont actuellement disponibles :</p>
<ul>
<li>Stations</li>
<li>Notifications de données</li>
<li>Métadonnées de découverte</li>
</ul>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Combien de notifications de données ont été publiées ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Cliquez sur "Notifications de données", puis cliquez sur <code>Parcourir les éléments de "Notifications de données"</code>. </p>
<p>Vous remarquerez que la page indique "Aucun élément" car aucune notification de données n'a encore été publiée.</p>
</details>
<h2 id="application-web-wis2box">Application web wis2box</h2>
<p>Ouvrez un navigateur web et visitez la page <code>http://YOUR-HOST/wis2box-webapp</code>.</p>
<p>Vous verrez une fenêtre pop-up vous demandant votre nom d'utilisateur et votre mot de passe. Utilisez le nom d'utilisateur par défaut <code>wis2box-user</code> et le <code>WIS2BOX_WEBAPP_PASSWORD</code> défini dans le fichier <code>wis2box.env</code> et cliquez sur "Se connecter" :</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vérifiez votre wis2box.env pour la valeur de votre WIS2BOX_WEBAPP_PASSWORD. Vous pouvez utiliser la commande suivante pour vérifier la valeur de cette variable d'environnement :</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box/wis2box.env | grep WIS2BOX_WEBAPP_PASSWORD
</code></pre></div>
</div>
<p>Une fois connecté, déplacez votre souris vers le menu à gauche pour voir les options disponibles dans l'application web wis2box :</p>
<p><img alt="wis2box-webapp-menu.png" src="/../assets/img/wis2box-webapp-menu.png" width="400"></p>
<p>Ceci est l'application web wis2box qui vous permet d'interagir avec votre wis2box :</p>
<ul>
<li>créer et gérer des ensembles de données</li>
<li>mettre à jour/revoir vos métadonnées de station</li>
<li>télécharger des observations manuelles utilisant le formulaire synop FM-12</li>
<li>surveiller les notifications publiées sur votre wis2box-broker</li>
</ul>
<p>Nous utiliserons cette application web lors d'une session ultérieure.</p>
<h2 id="wis2box-broker">wis2box-broker</h2>
<p>Ouvrez MQTT Explorer sur votre ordinateur et préparez une nouvelle connexion pour vous connecter à votre courtier (exécuté via le conteneur <strong>wis2box-broker</strong>).</p>
<p>Cliquez sur <code>+</code> pour ajouter une nouvelle connexion :</p>
<p><img alt="mqtt-explorer-new-connection.png" src="/../assets/img/mqtt-explorer-new-connection.png" width="300"></p>
<p>Vous pouvez cliquer sur le bouton 'ADVANCED' et vérifier que vous avez des abonnements aux sujets suivants :</p>
<ul>
<li><code>#</code></li>
<li><code>$SYS/#</code></li>
</ul>
<p><img alt="mqtt-explorer-topics.png" src="/../assets/img/mqtt-explorer-topics.png" width="550"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le sujet <code>#</code> est un abonnement générique qui s'abonnera à tous les sujets publiés sur le courtier.</p>
<p>Les messages publiés sous le sujet <code>$SYS</code> sont des messages système publiés par le service mosquitto lui-même.</p>
</div>
<p>Utilisez les détails de connexion suivants, en veillant à remplacer la valeur de <code>&lt;votre-hôte&gt;</code> par votre nom d'hôte et <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code> par la valeur de votre fichier <code>wis2box.env</code> :</p>
<ul>
<li><strong>Protocole : mqtt://</strong></li>
<li><strong>Hôte : <code>&lt;votre-hôte&gt;</code></strong></li>
<li><strong>Port : 1883</strong></li>
<li><strong>Nom d'utilisateur : wis2box</strong></li>
<li><strong>Mot de passe : <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code></strong></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous pouvez vérifier votre wis2box.env pour la valeur de votre WIS2BOX_BROKER_PASSWORD. Vous pouvez utiliser la commande suivante pour vérifier la valeur de cette variable d'environnement :</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box/wis2box.env | grep WIS2BOX_BROKER_PASSWORD
</code></pre></div>
<p>Notez qu'il s'agit de votre mot de passe de courtier <strong>interne</strong>, le Global Broker utilisera des informations d'identification différentes (en lecture seule) pour s'abonner à votre courtier. Ne partagez jamais ce mot de passe avec quiconque.</p>
</div>
<p>Assurez-vous de cliquer sur "ENREGISTRER" pour stocker vos détails de connexion.</p>
<p>Ensuite, cliquez sur "CONNECTER" pour vous connecter à votre <strong>wis2box-broker</strong>.</p>
<p><img alt="mqtt-explorer-wis2box-broker.png" src="/../assets/img/mqtt-explorer-wis2box-broker.png" width="600"></p>
<p>Une fois connecté, vérifiez que les statistiques internes mosquitto sont publiées par votre courtier sous le sujet <code>$SYS</code> :</p>
<p><img alt="mqtt-explorer-sys-topic.png" src="/../assets/img/mqtt-explorer-sys-topic.png" width="400"></p>
<p>Gardez MQTT Explorer ouvert, car nous l'utiliserons pour surveiller les messages publiés sur le courtier.</p>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Félicitations !</p>
<p>Dans cette session pratique, vous avez appris à :</p>
<ul>
<li>exécuter le script <code>wis2box-create-config.py</code> pour créer la configuration initiale</li>
<li>démarrer wis2box et vérifier le statut de ses composants</li>
<li>accéder à wis2box-webapp et wis2box-API dans un navigateur</li>
<li>se connecter au courtier MQTT sur votre VM étudiant en utilisant MQTT Explorer</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>