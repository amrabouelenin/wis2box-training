
<!doctype html>
<html lang="ar" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/ar/practical-sessions/automating-data-ingestion/">
      
      
        <link rel="prev" href="../adding-gts-headers-to-wis2-notifications/">
      
      
        <link rel="next" href="../bufr-command-line-tools/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>أتمتة استقبال البيانات - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="rtl" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          انتقل إلى المحتوى
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="عنوان العارضة">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              أتمتة استقبال البيانات
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="إختر اللغة">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/practical-sessions/automating-data-ingestion/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/automating-data-ingestion/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/automating-data-ingestion/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/automating-data-ingestion/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="بحث" placeholder="بحث" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="إبحث">
        
        <button type="reset" class="md-search__icon md-icon" title="مسح كلي" aria-label="مسح كلي" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            بدء البحث
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="تصفح" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    الصفحة الرئيسية
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    أوراق المساعدة
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            أوراق المساعدة
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    دليل Linux المختصر
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    دليل مختصر لـ WIS2 in a box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    جلسات عملية
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            جلسات عملية
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    الاتصال بـ WIS2 عبر MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    الوصول إلى جهاز الطالب الافتراضي الخاص بك
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    تهيئة wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    تكوين مجموعات البيانات في wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    تكوين بيانات المحطة الوصفية
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    إدخال البيانات للنشر
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    أدوات تحويل البيانات
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    قوالب تحويل CSV إلى BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    إضافة رؤوس GTS إلى إشعارات WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    إعداد مجموعة بيانات موصى بها مع التحكم في الوصول
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    تنزيل وفك تشفير البيانات من WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    اكتشاف مجموعات البيانات من فهرس الاكتشاف العالمي WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    قوالب csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            قوالب csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    قالب AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    قالب DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="جدول المحتويات">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      جدول المحتويات
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      مقدمة
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      التحضير
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-python-minio" class="md-nav__link">
    <span class="md-ellipsis">
      التمرين 1: إعداد سكربت Python لاستقبال البيانات في MinIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      التمرين 2: استقبال البيانات الثنائية
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-synop-ascii" class="md-nav__link">
    <span class="md-ellipsis">
      التمرين 3: استقبال بيانات SYNOP بتنسيق ASCII
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">أتمتة استقبال البيانات</h1>
<div class="admonition abstract">
<p class="admonition-title">نتائج التعلم</p>
<p>بنهاية هذه الجلسة العملية، ستكون قادرًا على:</p>
<ul>
<li>فهم كيفية تحديد إضافات البيانات لمجموعة البيانات الخاصة بك لسير عمل استقبال البيانات</li>
<li>استقبال البيانات في wis2box باستخدام سكربت يستخدم عميل Python لـ MinIO</li>
<li>استقبال البيانات في wis2box بالوصول إلى MinIO عبر SFTP</li>
</ul>
</div>
<h2 id="_2">مقدمة</h2>
<p>يستمع حاوية <strong>wis2box-management</strong> للأحداث من خدمة تخزين MinIO لتشغيل استقبال البيانات بناءً على الإضافات المُعدة لمجموعة البيانات الخاصة بك. هذا يتيح لك تحميل البيانات إلى دلو MinIO وتشغيل سير عمل wis2box لنشر البيانات على وسيط WIS2.</p>
<p>تحدد الإضافات الوحدات البرمجية بلغة Python التي يتم تحميلها بواسطة حاوية <strong>wis2box-management</strong> وتحدد كيفية تحويل البيانات ونشرها.</p>
<p>في التمرين السابق يجب أن تكون قد أنشأت مجموعة بيانات باستخدام القالب <code>surface-based-observations/synop</code> والذي يشمل الإضافات التالية:</p>
<p><img alt="تعيينات البيانات" src="/../assets/img/wis2box-data-mappings.png" width="800"></p>
<p>عندما يتم تحميل ملف إلى MinIO، سيقوم wis2box بمطابقة الملف مع مجموعة البيانات عندما يحتوي مسار الملف على معرف مجموعة البيانات (<code>metadata_id</code>) وسيحدد الإضافات المستخدمة بناءً على امتداد الملف ونمط الملف المحدد في تعيينات المجموعة.</p>
<p>في الجلسات السابقة، قمنا بتشغيل سير عمل استقبال البيانات باستخدام وظائف سطر الأوامر في wis2box، والتي تقوم بتحميل البيانات إلى تخزين MinIO في المسار الصحيح.</p>
<p>يمكن إجراء نفس الخطوات برمجيًا باستخدام أي برنامج عميل لـ MinIO أو S3، مما يتيح لك أتمتة استقبال بياناتك كجزء من سير عملك التشغيلي.</p>
<p>بدلاً من ذلك، يمكنك أيضًا الوصول إلى MinIO باستخدام بروتوكول SFTP لتحميل البيانات وتشغيل سير عمل استقبال البيانات.</p>
<h2 id="_3">التحضير</h2>
<p>قم بتسجيل الدخول إلى جهاز الطالب الافتراضي الخاص بك باستخدام عميل SSH الخاص بك (PuTTY أو غيره).</p>
<p>تأكد من أن wis2box يعمل:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1/
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<p>تأكد من أن MQTT Explorer يعمل ومتصل بنسختك. إذا كنت لا تزال متصلاً من الجلسة السابقة، قم بمسح أي رسائل سابقة قد تكون قد تلقيتها من الطابور.
يمكن القيام بذلك إما بقطع الاتصال وإعادة الاتصال أو بالنقر على أيقونة سلة المهملات للموضوع المحدد.</p>
<p>تأكد من أن لديك متصفح ويب مفتوح مع لوحة تحكم Grafana لنسختك بالانتقال إلى <code>http://&lt;your-host&gt;:3000</code></p>
<p>وتأكد من أن لديك علامة تبويب ثانية مفتوحة مع واجهة المستخدم MinIO على <code>http://&lt;your-host&gt;:9001</code>. تذكر أنك بحاجة إلى تسجيل الدخول باستخدام <code>WIS2BOX_STORAGE_USER</code> و <code>WIS2BOX_STORAGE_PASSWORD</code> المحددين في ملف <code>wis2box.env</code> الخاص بك.</p>
<h2 id="1-python-minio">التمرين 1: إعداد سكربت Python لاستقبال البيانات في MinIO</h2>
<p>في هذا التمرين سنستخدم عميل Python لـ MinIO لنسخ البيانات إلى MinIO.</p>
<p>يوفر MinIO عميل Python يمكن تثبيته على النحو التالي:</p>
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>minio
</code></pre></div>
<p>على جهاز الطالب الافتراضي الخاص بك، سيكون حزمة 'minio' لـ Python مثبتة بالفعل.</p>
<p>انتقل إلى الدليل <code>exercise-materials/data-ingest-exercises</code>؛ يحتوي هذا الدليل على سكربت نموذجي <code>copy_file_to_incoming.py</code> يستخدم عميل Python لـ MinIO لنسخ ملف إلى MinIO.</p>
<p>حاول تشغيل السكربت لنسخ ملف البيانات النموذجي <code>csv-aws-example.csv</code> إلى دلو <code>wis2box-incoming</code> في MinIO" على النحو التالي:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/exercise-materials/data-ingest-exercises
python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>csv-aws-example.csv
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ستحصل على خطأ لأن السكربت لم يتم تكوينه بعد للوصول إلى نقطة النهاية MinIO على wis2box الخاص بك.</p>
</div>
<p>يحتاج السكربت إلى معرفة نقطة النهاية الصحيحة للوصول إلى MinIO على wis2box الخاص بك. إذا كان wis2box يعمل على مضيفك، فإن نقطة النهاية MinIO متاحة على <code>http://&lt;your-host&gt;:9000</code>. يحتاج السكربت أيضًا إلى تحديث كلمة المرور الخاصة بالتخزين والمسار في دلو MinIO لتخزين البيانات.</p>
<div class="admonition question">
<p class="admonition-title">تحديث السكربت واستقبال بيانات CSV</p>
<p>قم بتحرير السكربت <code>copy_file_to_incoming.py</code> لمعالجة الأخطاء، باستخدام إحدى الطرق التالية:
- من سطر الأوامر: استخدم محرر النصوص <code>nano</code> أو <code>vim</code> لتحرير السكربت
- باستخدام WinSCP: ابدأ اتصالًا جديدًا باستخدام بروتوكول الملف <code>SCP</code> ونفس بيانات الاعتماد كعميل SSH الخاص بك. انتقل إلى الدليل <code>exercise-materials/data-ingest-exercises</code> وقم بتحرير <code>copy_file_to_incoming.py</code> باستخدام محرر النصوص المدمج</p>
<p>تأكد من أنك:</p>
<ul>
<li>حددت نقطة النهاية MinIO الصحيحة لمضيفك</li>
<li>قدمت كلمة المرور الصحيحة لتخزين MinIO الخاص بك</li>
<li>قدمت المسار الصحيح في دلو MinIO لتخزين البيانات</li>
</ul>
<p>أعد تشغيل السكربت لاستقبال ملف البيانات النموذجي <code>csv-aws-example.csv</code> في MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>csv-aws-example.csv
</code></pre></div>
<p>وتأكد من حل الأخطاء.</p>
</div>
<p>يمكنك التحقق من أن البيانات تم تحميلها بشكل صحيح من خلال التحقق من واجهة المستخدم MinIO ومعرفة ما إذا كانت البيانات النموذجية متوفرة في الدليل الصحيح في دلو <code>wis2box-incoming</code>.</p>
<p>يمكنك استخدام لوحة تحكم Grafana للتحقق من حالة سير عمل استقبال البيانات.</p>
<p>وأخيرًا، يمكنك استخدام MQTT Explorer للتحقق مما إذا تم نشر الإشعارات للبيانات التي قمت باستقبالها. يجب أن ترى أن البيانات CSV تم تحويلها إلى تنسيق BUFR وأن إشعار بيانات WIS2 تم نشره بعنوان URL "قياسي" لتمكين تنزيل بيانات BUFR.</p>
<h2 id="2">التمرين 2: استقبال البيانات الثنائية</h2>
<p>بعد ذلك، سنحاول استقبال البيانات الثنائية بتنسيق BUFR باستخدام عميل Python لـ MinIO.</p>
<p>يمكن لـ wis2box استقبال البيانات الثنائية بتنسيق BUFR باستخدام الإضافة <code>wis2box.data.bufr4.ObservationDataBUFR</code> المضمنة في wis2box.</p>
<p>سيقوم هذا الإضافة بتقسيم ملف BUFR إلى رسائل BUFR فردية ونشر كل رسالة إلى وسيط MQTT. إذا لم يتم تعريف المحطة لرسالة BUFR المقابلة في بيانات المحطة لـ wis2box، فلن يتم نشر الرسالة.</p>
<p>نظرًا لأنك استخدمت القالب <code>surface-based-observations/synop</code> في الجلسة السابقة، فإن تعيينات بياناتك تشمل الإضافة <code>FM-12 data converted to BUFR</code> لتعيينات المجموعة. يقوم هذا الإضافة بتحميل الوحدة البرمجية <code>wis2box.data.synop2bufr.ObservationDataSYNOP2BUFR</code> لاستقبال البيانات.</p>
<div class="admonition question">
<p class="admonition-title">استقبال البيانات الثنائية بتنسيق BUFR</p>
<p>قم بتشغيل الأمر التالي لنسخ ملف البيانات الثنائية <code>bufr-example.bin</code> إلى دلو <code>wis2box-incoming</code> في MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>bufr-example.bin
</code></pre></div>
</div>
<p>تحقق من لوحة تحكم Grafana و MQTT Explorer لمعرفة ما إذا كانت البيانات الاختبارية قد تم استقبالها ونشرها بنجاح وإذا رأيت أي أخطاء، حاول حلها.</p>
<div class="admonition question">
<p class="admonition-title">تحقق من استقبال البيانات</p>
<p>كم عدد الرسائل التي تم نشرها إلى وسيط MQTT لهذه العينة من البيانات؟</p>
</div>
<details class="success">
<summary>انقر لكشف الإجابة</summary>
<p>إذا قمت باستقبال ونشر عينة البيانات الأخيرة بنجاح، يجب أن تكون قد تلقيت 10 إشعارات جديدة على وسيط MQTT الخاص بـ wis2box. يتوافق كل إشعار مع بيانات لمحطة واحدة لطابع زمني لملاحظة واحدة.</p>
<p>يقوم الإضافة <code>wis2box.data.bufr4.ObservationDataBUFR</code> بتقسيم ملف BUFR إلى رسائل BUFR فردية ونشر رسالة واحدة لكل محطة وطابع زمني للملاحظة.</p>
</details>
<h2 id="3-synop-ascii">التمرين 3: استقبال بيانات SYNOP بتنسيق ASCII</h2>
<p>في الجلسة السابقة استخدمنا نموذج SYNOP في <strong>wis2box-webapp</strong> لاستقبال بيانات SYNOP بتنسيق ASCII. يمكنك أيضًا استقبال بيانات SYNOP بتنسيق ASCII عن طريق تحميل البيانات إلى MinIO.</p>
<p>في الجلسة السابقة يجب أن تكون قد أنشأت مجموعة بيانات تشمل الإضافة 'FM-12 data converted to BUFR' لتعيينات المجموعة:</p>
<p><img alt="تعيينات المجموعة" src="/../assets/img/wis2box-data-mappings.png" width="800"></p>
<p>يقوم هذا الإضافة بتحميل الوحدة البرمجية <code>wis2box.data.synop2bufr.ObservationDataSYNOP2BUFR</code> لاستقبال البيانات.</p>
<p>حاول استخدام عميل Python لـ MinIO لاستقبال بيانات الاختبار <code>synop-202307.txt</code> و <code>synop-202308.txt</code> في نسخة wis2box الخاصة بك.</p>
<p>لاحظ أن الملفين يحتويان على نفس المحتوى، ولكن اسم الملف مختلف. يتم استخدام اسم الملف لتحديد تاريخ عينة البيانات.</p>
<p>يعتمد الإضافة synop2bufr على نمط ملف لاستخراج التاريخ من اسم الملف. يتم استخدام المجموعة الأولى في التع</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u062a\u0645 \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629", "clipboard.copy": "\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629", "search.result.more.one": "\u0623\u0643\u062b\u0631 \u0645\u0646 1 \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629", "search.result.more.other": "\u0623\u0643\u062b\u0631 \u0645\u0646 # \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629", "search.result.none": "\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c", "search.result.one": "\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b \u0645\u0633\u062a\u0646\u062f \u0648\u0627\u062d\u062f", "search.result.other": "\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b # \u0645\u0633\u062a\u0646\u062f\u0627\u062a", "search.result.placeholder": "\u0627\u0643\u062a\u0628 \u0644\u0628\u062f\u0621 \u0627\u0644\u0628\u062d\u062b", "search.result.term.missing": "\u0645\u0641\u0642\u0648\u062f", "select.version": "\u0625\u062e\u062a\u0631 \u0627\u0644\u0625\u0635\u062f\u0627\u0631"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>