
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/es/practical-sessions/ingesting-data-for-publication/">
      
      
        <link rel="prev" href="../configuring-station-metadata/">
      
      
        <link rel="next" href="../data-conversion-tools/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Ingesta de Datos para Publicación - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ingesta-de-datos-para-publicacion" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ingesta de Datos para Publicación
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/ingesting-data-for-publication/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/practical-sessions/ingesting-data-for-publication/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/ingesting-data-for-publication/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/ingesting-data-for-publication/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/ingesting-data-for-publication/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hojas de referencia
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Hojas de referencia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Plantillas csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Plantillas csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sesiones prácticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sesiones prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conectándose a WIS2 a través de MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acceso a tu VM de estudiante
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicializando wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de conjuntos de datos en wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de metadatos de estaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Ingesta de Datos para Publicación
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Ingesta de Datos para Publicación
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparacion" class="md-nav__link">
    <span class="md-ellipsis">
      Preparación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparar-datos-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Preparar Datos de Ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-la-estacion-de-prueba" class="md-nav__link">
    <span class="md-ellipsis">
      Agregar la Estación de Prueba
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prueba-de-ingestion-de-datos-desde-la-linea-de-comandos" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba de Ingestión de Datos desde la Línea de Comandos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subir-datos-usando-la-interfaz-web-de-minio" class="md-nav__link">
    <span class="md-ellipsis">
      Subir Datos Usando la Interfaz Web de MinIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subir-datos-usando-sftp" class="md-nav__link">
    <span class="md-ellipsis">
      Subir Datos Usando SFTP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subiendo-datos-usando-un-script-de-python" class="md-nav__link">
    <span class="md-ellipsis">
      Subiendo Datos Usando un Script de Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Herramientas de Conversión de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantillas de mapeo de CSV a BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Añadiendo encabezados GTS a las notificaciones WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de un conjunto de datos recomendado con control de acceso
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descarga y decodificación de datos desde WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descubriendo conjuntos de datos desde el Catálogo Global de Descubrimiento WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparacion" class="md-nav__link">
    <span class="md-ellipsis">
      Preparación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparar-datos-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Preparar Datos de Ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-la-estacion-de-prueba" class="md-nav__link">
    <span class="md-ellipsis">
      Agregar la Estación de Prueba
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prueba-de-ingestion-de-datos-desde-la-linea-de-comandos" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba de Ingestión de Datos desde la Línea de Comandos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subir-datos-usando-la-interfaz-web-de-minio" class="md-nav__link">
    <span class="md-ellipsis">
      Subir Datos Usando la Interfaz Web de MinIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subir-datos-usando-sftp" class="md-nav__link">
    <span class="md-ellipsis">
      Subir Datos Usando SFTP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subiendo-datos-usando-un-script-de-python" class="md-nav__link">
    <span class="md-ellipsis">
      Subiendo Datos Usando un Script de Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ingesta-de-datos-para-publicacion">Ingesta de datos para publicación</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de Aprendizaje</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>Activar el flujo de trabajo de wis2box subiendo datos a MinIO usando la línea de comandos, la interfaz web de MinIO, SFTP o un script de Python.</li>
<li>Acceder al tablero de Grafana para monitorear el estado de la ingestión de datos y ver los registros de tu instancia de wis2box.</li>
<li>Ver las notificaciones de datos WIS2 publicadas por tu wis2box usando MQTT Explorer.</li>
</ul>
</div>
<h2 id="introduccion">Introducción</h2>
<p>En WIS2, los datos se comparten en tiempo real utilizando notificaciones de datos WIS2 que contienen un enlace "canónico" desde el cual se pueden descargar los datos.</p>
<p>Para activar el flujo de trabajo de datos en un WIS2 Node usando el software wis2box, los datos deben subirse al bucket <strong>wis2box-incoming</strong> en <strong>MinIO</strong>, lo que inicia el flujo de trabajo de wis2box. Este proceso resulta en la publicación de los datos a través de una notificación de datos WIS2. Dependiendo de las configuraciones de mapeo de datos en tu instancia de wis2box, los datos pueden transformarse al formato BUFR antes de ser publicados.</p>
<p>En este ejercicio, utilizaremos archivos de datos de muestra para activar el flujo de trabajo de wis2box y <strong>publicar notificaciones de datos WIS2</strong> para el conjunto de datos que configuraste en la sesión práctica anterior.</p>
<p>Durante el ejercicio, monitorearemos el estado de la ingestión de datos usando el <strong>tablero de Grafana</strong> y <strong>MQTT Explorer</strong>. El tablero de Grafana utiliza datos de Prometheus y Loki para mostrar el estado de tu wis2box, mientras que MQTT Explorer te permite ver las notificaciones de datos WIS2 publicadas por tu instancia de wis2box.</p>
<p>Ten en cuenta que wis2box transformará los datos de ejemplo al formato BUFR antes de publicarlos en el broker MQTT, según los mapeos de datos preconfigurados en tu conjunto de datos. Para este ejercicio, nos centraremos en los diferentes métodos para subir datos a tu instancia de wis2box y verificar la ingestión y publicación exitosas. La transformación de datos se cubrirá más adelante en la sesión práctica <a href="./data-conversion-tools">Herramientas de Conversión de Datos</a>.</p>
<h2 id="preparacion">Preparación</h2>
<p>Esta sección utiliza el conjunto de datos para "surface-based-observations/synop" previamente creado en la sesión práctica <a href="./configuring-wis2box-datasets">Configurando Conjuntos de Datos en wis2box</a>. También requiere conocimiento sobre la configuración de estaciones en <strong>wis2box-webapp</strong>, como se describe en la sesión práctica <a href="./configuring-station-metadata">Configuración de Metadatos de Estación</a>.</p>
<p>Asegúrate de poder iniciar sesión en tu VM de estudiante usando tu cliente SSH (por ejemplo, PuTTY).</p>
<p>Asegúrate de que wis2box esté en funcionamiento:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box/
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<p>Asegúrate de que MQTT Explorer esté ejecutándose y conectado a tu instancia usando las credenciales públicas <code>everyone/everyone</code> con una suscripción al tema <code>origin/a/wis2/#</code>.</p>
<p>Asegúrate de tener un navegador web abierto con el tablero de Grafana para tu instancia navegando a <code>http://YOUR-HOST:3000</code>.</p>
<h3 id="preparar-datos-de-ejemplo">Preparar Datos de Ejemplo</h3>
<p>Copia el directorio <code>exercise-materials/data-ingest-exercises</code> al directorio que definiste como <code>WIS2BOX_HOST_DATADIR</code> en tu archivo <code>wis2box.env</code>:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-r<span class="w"> </span>~/exercise-materials/data-ingest-exercises<span class="w"> </span>~/wis2box-data/
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El <code>WIS2BOX_HOST_DATADIR</code> está montado como <code>/data/wis2box/</code> dentro del contenedor wis2box-management por el archivo <code>docker-compose.yml</code> incluido en el directorio <code>wis2box</code>.</p>
<p>Esto te permite compartir datos entre el host y el contenedor.</p>
</div>
<h3 id="agregar-la-estacion-de-prueba">Agregar la Estación de Prueba</h3>
<p>Agrega la estación con el identificador WIGOS <code>0-20000-0-64400</code> a tu instancia de wis2box usando el editor de estaciones en wis2box-webapp.</p>
<p>Recupera la estación de OSCAR:</p>
<p><img alt="oscar-station" src="/../assets/img/webapp-test-station-oscar-search.png" width="600"></p>
<p>Agrega la estación a los conjuntos de datos que creaste para publicar en "../surface-based-observations/synop" y guarda los cambios usando tu token de autenticación:</p>
<p><img alt="webapp-test-station" src="/../assets/img/webapp-test-station-save.png" width="800"></p>
<p>Ten en cuenta que puedes eliminar esta estación de tu conjunto de datos después de la sesión práctica.</p>
<h2 id="prueba-de-ingestion-de-datos-desde-la-linea-de-comandos">Prueba de Ingestión de Datos desde la Línea de Comandos</h2>
<p>En este ejercicio, utilizaremos el comando <code>wis2box data ingest</code> para subir datos a MinIO.</p>
<p>Asegúrate de estar en el directorio <code>wis2box</code> e inicia sesión en el contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Verifica que los siguientes datos de muestra estén disponibles en el directorio <code>/data/wis2box/</code> dentro del contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>/data/wis2box/data-ingest-exercises/synop_202412030900.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Ingestión de Datos Usando <code>wis2box data ingest</code></p>
<p>Ejecuta el siguiente comando para ingerir el archivo de datos de muestra en tu instancia de wis2box:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>ingest<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/data-ingest-exercises/synop_202412030900.txt<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:not-my-centre:synop-test
</code></pre></div>
<p>¿Se ingirieron los datos con éxito? Si no, ¿cuál fue el mensaje de error y cómo puedes solucionarlo?</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Los datos <strong>no</strong> se ingirieron con éxito. Deberías ver lo siguiente:</p>
<div class="highlight"><pre><span></span><code>Error:<span class="w"> </span><span class="nv">metadata_id</span><span class="o">=</span>urn:wmo:md:not-my-centre:synop-test<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>data<span class="w"> </span>mappings
</code></pre></div>
<p>El mensaje de error indica que el identificador de metadatos que proporcionaste no coincide con ninguno de los conjuntos de datos que has configurado en tu instancia de wis2box.</p>
<p>Proporciona el ID de metadatos correcto que coincida con el conjunto de datos que creaste en la sesión práctica anterior y repite el comando de ingestión de datos hasta que veas la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>Processing<span class="w"> </span>/data/wis2box/data-ingest-exercises/synop_202412030900.txt
Done
</code></pre></div>
</details>
<p>Ve a la consola de MinIO en tu navegador y verifica si el archivo <code>synop_202412030900.txt</code> fue subido al bucket <code>wis2box-incoming</code>. Deberías ver un nuevo directorio con el nombre del conjunto de datos que proporcionaste en la opción <code>--metadata-id</code>, y dentro de este directorio, encontrarás el archivo <code>synop_202412030900.txt</code>:</p>
<p><img alt="minio-wis2box-incoming-dataset-folder" src="/../assets/img/minio-data-ingest-test-data.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El comando <code>wis2box data ingest</code> subió el archivo al bucket <code>wis2box-incoming</code> en MinIO en un directorio nombrado según el identificador de metadatos que proporcionaste.</p>
</div>
<p>Ve al tablero de Grafana en tu navegador y verifica el estado de la ingestión de datos.</p>
<div class="admonition question">
<p class="admonition-title">Verifica el Estado de la Ingestión de Datos en Grafana</p>
<p>Ve al tablero de Grafana en <strong>http://your-host:3000</strong> y verifica el estado de la ingestión de datos en tu navegador.</p>
<p>¿Cómo puedes saber si los datos se ingirieron y publicaron con éxito?</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Si ingiriste los datos con éxito, deberías ver lo siguiente:</p>
<p><img alt="grafana_data_ingest" src="/../assets/img/grafana_data-ingest-test.png" width="400">  </p>
<p>Si no ves esto, verifica si hay mensajes de ADVERTENCIA o ERROR mostrados en la parte inferior del tablero e intenta resolverlos.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Verifica el Broker MQTT para Notificaciones WIS2</p>
<p>Ve a MQTT Explorer y verifica si puedes ver el mensaje de notificación WIS2 para los datos que acabas de ingerir.</p>
<p>¿Cuántas notificaciones de datos WIS2 fueron publicadas por tu wis2box?</p>
<p>¿Cómo accedes al contenido de los datos publicados?</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Deberías ver 1 notificación de datos WIS2 publicada por tu wis2box.</p>
<p>Para acceder al contenido de los datos publicados, puedes expandir la estructura del tema para ver los diferentes niveles del mensaje hasta llegar al último nivel y revisar el contenido del mensaje.</p>
<p>El contenido del mensaje tiene una sección de "links" con una clave "rel" de "canonical" y una clave "href" con la URL para descargar los datos. La URL estará en el formato <code>http://YOUR-HOST/data/...</code>. </p>
<p>Ten en cuenta que el formato de los datos es BUFR, y necesitarás un analizador de BUFR para ver el contenido de los datos. El formato BUFR es un formato binario utilizado por los servicios meteorológicos para intercambiar datos. Los complementos de datos dentro de wis2box transformaron los datos a BUFR antes de publicarlos.</p>
</details>
<p>Después de completar este ejercicio, sal del contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h2 id="subir-datos-usando-la-interfaz-web-de-minio">Subir Datos Usando la Interfaz Web de MinIO</h2>
<p>En los ejercicios anteriores, subiste datos disponibles en el host de wis2box a MinIO usando el comando <code>wis2box data ingest</code>. </p>
<p>A continuación, utilizaremos la interfaz web de MinIO, que te permite descargar y subir datos a MinIO usando un navegador web.</p>
<div class="admonition question">
<p class="admonition-title">Vuelve a Subir Datos Usando la Interfaz Web de MinIO</p>
<p>Ve a la interfaz web de MinIO en tu navegador y navega al bucket <code>wis2box-incoming</code>. Verás el archivo <code>synop_202412030900.txt</code> que subiste en los ejercicios anteriores.</p>
<p>Haz clic en el archivo, y tendrás la opción de descargarlo:</p>
<p><img alt="minio-wis2box-incoming-dataset-folder" src="/../assets/img/minio-download.png" width="800"></p>
<p>Puedes descargar este archivo y volver a subirlo al mismo camino en MinIO para volver a activar el flujo de trabajo de wis2box.</p>
<p>Verifica el tablero de Grafana y MQTT Explorer para ver si los datos se ingirieron y publicaron con éxito.</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Verás un mensaje indicando que wis2box ya publicó estos datos:</p>
<div class="highlight"><pre><span></span><code>ERROR<span class="w"> </span>-<span class="w"> </span>Data<span class="w"> </span>already<span class="w"> </span>published<span class="w"> </span><span class="k">for</span><span class="w"> </span>WIGOS_0-20000-0-64400_20241203T090000-bufr4<span class="p">;</span><span class="w"> </span>not<span class="w"> </span>publishing
</code></pre></div>
<p>Esto demuestra que se activó el flujo de trabajo de datos, pero los datos no se volvieron a publicar. wis2box no publicará los mismos datos dos veces. </p>
</details>
<div class="admonition question">
<p class="admonition-title">Sube Nuevos Datos Usando la Interfaz Web de MinIO</p>
<p>Descarga este archivo de muestra <a href="../../../sample-data/synop_202502040900.txt">synop_202502040900.txt</a> (haz clic derecho y selecciona "guardar como" para descargar el archivo).</p>
<p>Sube el archivo que descargaste usando la interfaz web al mismo camino en MinIO que el archivo anterior.</p>
<p>¿Se ingirieron y publicaron los datos con éxito?</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Ve al tablero de Grafana y verifica si los datos se ingirieron y publicaron con éxito.</p>
<p>Si usas el camino incorrecto, verás un mensaje de error en los registros.</p>
<p>Si usas el camino correcto, verás una notificación de datos WIS2 más publicada para la estación de prueba <code>0-20000-0-64400</code>, indicando que los datos se ingirieron y publicaron con éxito.</p>
<p><img alt="grafana_data_ingest" src="/../assets/img/grafana_data-ingest-test2.png" width="400"> </p>
</details>
<h2 id="subir-datos-usando-sftp">Subir Datos Usando SFTP</h2>
<p>El servicio MinIO en wis2box también se puede acceder a través de SFTP. El servidor SFTP para MinIO está vinculado al puerto 8022 en el host (el puerto 22 se usa para SSH).</p>
<p>En este ejercicio, demostraremos cómo usar WinSCP para subir datos a MinIO usando SFTP.</p>
<p>Puedes configurar una nueva conexión WinSCP como se muestra en esta captura de pantalla:</p>
<p><img alt="winscp-sftp-connection" src="/../assets/img/winscp-sftp-login.png" width="400"></p>
<p>Las credenciales para la conexión SFTP están definidas por <code>WIS2BOX_STORAGE_USERNAME</code> y <code>WIS2BOX_STORAGE_PASSWORD</code> en tu archivo <code>wis2box.env</code> y son las mismas que las credenciales que usaste para conectarte a la interfaz de MinIO.</p>
<p>Cuando inicies sesión, verás los buckets utilizados por wis2box en MinIO:</p>
<p><img alt="winscp-sftp-bucket" src="/../assets/img/winscp-buckets.png" width="600"></p>
<p>Puedes navegar al bucket <code>wis2box-incoming</code> y luego a la carpeta de tu conjunto de datos. Verás los archivos que subiste en los ejercicios anteriores:</p>
<p><img alt="winscp-sftp-incoming-path" src="/../assets/img/winscp-incoming-data-path.png" width="600"></p>
<div class="admonition question">
<p class="admonition-title">Sube Datos Usando SFTP</p>
<p>Descarga este archivo de muestra a tu computadora local:</p>
<p><a href="../../../sample-data/synop_202503030900.txt">synop_202503030900.txt</a> (haz clic derecho y selecciona "guardar como" para descargar el archivo).</p>
<p>Luego súbelo al camino del conjunto de datos entrante en MinIO usando tu sesión SFTP en WinSCP.</p>
<p>Verifica el tablero de Grafana y MQTT Explorer para ver si los datos se ingirieron y publicaron con éxito.</p>
</div>
<details class="success">
<summary>Haz Clic para Revelar la Respuesta</summary>
<p>Deberías ver una nueva notificación de datos WIS2 publicada para la estación de prueba <code>0-20000-0-64400</code>, indicando que los datos se ingirieron y publicaron con éxito.</p>
<p><img alt="grafana_data_ingest" src="/../assets/img/grafana_data-ingest-test3.png" width="400"></p>
</details>
<p>Si utiliza una ruta incorrecta, verá un mensaje de error en los registros.</p>
<h2 id="subiendo-datos-usando-un-script-de-python">Subiendo Datos Usando un Script de Python</h2>
<p>En este ejercicio, utilizaremos el cliente de Python de MinIO para copiar datos en MinIO.</p>
<p>MinIO proporciona un cliente de Python, que se puede instalar de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>minio
</code></pre></div>
<p>En su VM de estudiante, el paquete 'minio' para Python ya estará instalado.</p>
<p>En el directorio <code>exercise-materials/data-ingest-exercises</code>, encontrará un script de ejemplo <code>copy_file_to_incoming.py</code> que se puede usar para copiar archivos en MinIO.</p>
<p>Intente ejecutar el script para copiar el archivo de datos de muestra <code>synop_202501030900.txt</code> en el bucket <code>wis2box-incoming</code> en MinIO de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-data/data-ingest-exercises
python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>synop_202501030900.txt
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Obtendrá un error ya que el script no está configurado para acceder al punto final de MinIO en su wis2box todavía.</p>
</div>
<p>El script necesita conocer el punto final correcto para acceder a MinIO en su wis2box. Si wis2box está ejecutándose en su host, el punto final de MinIO está disponible en <code>http://YOUR-HOST:9000</code>. El script también necesita ser actualizado con su contraseña de almacenamiento y la ruta en el bucket de MinIO para almacenar los datos.</p>
<div class="admonition question">
<p class="admonition-title">Actualice el Script e Ingeste los Datos CSV</p>
<p>Edite el script <code>copy_file_to_incoming.py</code> para abordar los errores, utilizando uno de los siguientes métodos:
- Desde la línea de comandos: use el editor de texto <code>nano</code> o <code>vim</code> para editar el script.
- Usando WinSCP: inicie una nueva conexión usando el Protocolo de Archivos <code>SCP</code> y las mismas credenciales que su cliente SSH. Navegue hasta el directorio <code>wis2box-data/data-ingest-exercises</code> y edite <code>copy_file_to_incoming.py</code> usando el editor de texto incorporado.</p>
<p>Asegúrese de que:</p>
<ul>
<li>Defina el punto final correcto de MinIO para su host.</li>
<li>Proporcione la contraseña de almacenamiento correcta para su instancia de MinIO.</li>
<li>Proporcione la ruta correcta en el bucket de MinIO para almacenar los datos.</li>
</ul>
<p>Vuelva a ejecutar el script para ingerir el archivo de datos de muestra <code>synop_202501030900.txt</code> en MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>~/wis2box-data/<span class="w"> </span>~/wis2box-data/synop_202501030900.txt
</code></pre></div>
<p>Asegúrese de que los errores estén resueltos.</p>
</div>
<p>Una vez que logre ejecutar el script con éxito, verá un mensaje indicando que el archivo fue copiado a MinIO, y debería ver notificaciones de datos publicadas por su instancia de wis2box en MQTT Explorer.</p>
<p>También puede verificar el tablero de Grafana para ver si los datos fueron ingeridos y publicados con éxito.</p>
<p>Ahora que el script está funcionando, puede intentar copiar otros archivos en MinIO usando el mismo script.</p>
<div class="admonition question">
<p class="admonition-title">Ingestión de Datos Binarios en Formato BUFR</p>
<p>Ejecute el siguiente comando para copiar el archivo de datos binarios <code>bufr-example.bin</code> en el bucket <code>wis2box-incoming</code> en MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>bufr-example.bin
</code></pre></div>
</div>
<p>Verifique el tablero de Grafana y MQTT Explorer para ver si los datos de prueba fueron ingeridos y publicados con éxito. Si ve algún error, intente resolverlo.</p>
<div class="admonition question">
<p class="admonition-title">Verifique la Ingesta de Datos</p>
<p>¿Cuántos mensajes se publicaron en el broker MQTT para esta muestra de datos?</p>
</div>
<details class="success">
<summary>Haga clic para Revelar la Respuesta</summary>
<p>Verá errores reportados en Grafana ya que las estaciones en el archivo BUFR no están definidas en la lista de estaciones de su instancia de wis2box.</p>
<p>Si todas las estaciones utilizadas en el archivo BUFR están definidas en su instancia de wis2box, debería ver 10 mensajes publicados en el broker MQTT. Cada notificación corresponde a datos de una estación para una marca de tiempo de observación.</p>
<p>El plugin <code>wis2box.data.bufr4.ObservationDataBUFR</code> divide el archivo BUFR en mensajes BUFR individuales y publica un mensaje para cada estación y marca de tiempo de observación.</p>
</details>
<h2 id="conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendió cómo:</p>
<ul>
<li>Activar el flujo de trabajo de wis2box subiendo datos a MinIO utilizando varios métodos.</li>
<li>Depurar errores comunes en el proceso de ingestión de datos usando el tablero de Grafana y los registros de su instancia de wis2box.</li>
<li>Monitorear las notificaciones de datos WIS2 publicadas por su wis2box en el tablero de Grafana y MQTT Explorer.</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>