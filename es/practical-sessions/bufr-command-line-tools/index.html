
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/es/practical-sessions/bufr-command-line-tools/">
      
      
        <link rel="prev" href="../automating-data-ingestion/">
      
      
        <link rel="next" href="../configuring-station-metadata/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Trabajando con datos BUFR - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trabajando-con-datos-bufr" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trabajando con datos BUFR
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/practical-sessions/bufr-command-line-tools/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/bufr-command-line-tools/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/bufr-command-line-tools/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/bufr-command-line-tools/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hojas de referencia
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Hojas de referencia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Plantillas csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Plantillas csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sesiones prácticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sesiones prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conectándose a WIS2 a través de MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acceso a tu VM de estudiante
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicializando wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de conjuntos de datos en wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de metadatos de estaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingesta de Datos para Publicación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Herramientas de Conversión de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantillas de mapeo de CSV a BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Añadiendo encabezados GTS a las notificaciones WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de un conjunto de datos recomendado con control de acceso
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descarga y decodificación de datos desde WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descubriendo conjuntos de datos desde el Catálogo Global de Descubrimiento WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparacion" class="md-nav__link">
    <span class="md-ellipsis">
      Preparación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uso-de-las-herramientas-de-linea-de-comandos-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Uso de las herramientas de línea de comandos BUFR
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uso de las herramientas de línea de comandos BUFR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejercicio-1-bufr_ls" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 1 - bufr_ls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-2-bufr_dump" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 2 - bufr_dump
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-3-archivos-de-mapeo-csv2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Ejercicio 3 - archivos de mapeo csv2bufr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="trabajando-con-datos-bufr">Trabajando con datos BUFR</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>En esta sesión práctica se te introducirá a algunas de las herramientas BUFR incluidas en el contenedor <strong>wis2box-api</strong> que se utilizan para transformar datos al formato BUFR y para leer el contenido codificado en BUFR.</p>
<p>Aprenderás:</p>
<ul>
<li>cómo inspeccionar los encabezados en el archivo BUFR usando el comando <code>bufr_ls</code></li>
<li>cómo extraer e inspeccionar los datos dentro de un archivo bufr usando <code>bufr_dump</code></li>
<li>la estructura básica de las plantillas bufr utilizadas en csv2bufr y cómo usar la herramienta de línea de comandos</li>
<li>y cómo hacer cambios básicos a las plantillas bufr y cómo actualizar el wis2box para usar la versión revisada</li>
</ul>
</div>
<h2 id="introduccion">Introducción</h2>
<p>Los complementos que producen notificaciones con datos BUFR utilizan procesos en el wis2box-api para trabajar con datos BUFR, por ejemplo para transformar los datos de CSV a BUFR o de BUFR a geojson.</p>
<p>El contenedor wis2box-api incluye varias herramientas para trabajar con datos BUFR.</p>
<p>Estas incluyen las herramientas desarrolladas por ECMWF e incluidas en el software ecCodes, más información sobre estas se puede encontrar en el <a href="https://confluence.ecmwf.int/display/ECC/BUFR+tools">sitio web de ecCodes</a>.</p>
<p>En esta sesión se te introducirá a los comandos <code>bufr_ls</code> y <code>bufr_dump</code> del paquete de software ecCodes y a la configuración avanzada de la herramienta csv2bufr.</p>
<h2 id="preparacion">Preparación</h2>
<p>Para usar las herramientas de línea de comandos BUFR necesitarás estar conectado al contenedor wis2box-api y a menos que se especifique lo contrario todos los comandos deben ejecutarse en este contenedor. También necesitarás tener MQTT Explorer abierto y conectado a tu broker.</p>
<p>Primero conéctate a tu VM de estudiante a través de tu cliente ssh y luego inicia sesión en el contenedor wis2box-api:</p>
<div class="highlight"><pre><span></span><code>cd ~/wis2box-1.0.0rc1
python3 wis2box-ctl.py login wis2box-api
</code></pre></div>
<p>Confirma que las herramientas están disponibles, comenzando con ecCodes:</p>
<p><div class="highlight"><pre><span></span><code>bufr_dump -V
</code></pre></div>
Deberías obtener la siguiente respuesta:</p>
<div class="highlight"><pre><span></span><code>ecCodes Version 2.28.0
</code></pre></div>
<p>Luego verifica csv2bufr:</p>
<div class="highlight"><pre><span></span><code>csv2bufr --version
</code></pre></div>
<p>Deberías obtener la siguiente respuesta:</p>
<div class="highlight"><pre><span></span><code>csv2bufr, versión 0.7.4
</code></pre></div>
<p>Finalmente, crea un directorio de trabajo para trabajar en él:</p>
<div class="highlight"><pre><span></span><code>cd /data/wis2box
mkdir -p working/bufr-cli
cd working/bufr-cli
</code></pre></div>
<p>Ahora estás listo para comenzar a usar las herramientas BUFR.</p>
<h2 id="uso-de-las-herramientas-de-linea-de-comandos-bufr">Uso de las herramientas de línea de comandos BUFR</h2>
<h3 id="ejercicio-1-bufr_ls">Ejercicio 1 - bufr_ls</h3>
<p>En este primer ejercicio usarás el comando <code>bufr_ls</code> para inspeccionar los encabezados de un archivo BUFR y determinar el contenido del archivo. Los siguientes encabezados están incluidos en un archivo BUFR:</p>
<table>
<thead>
<tr>
<th>encabezado</th>
<th>clave de ecCodes</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>centro originador/generador</td>
<td>centre</td>
<td>El centro originador / generador de los datos</td>
</tr>
<tr>
<td>subcentro originador/generador</td>
<td>bufrHeaderSubCentre</td>
<td>El subcentro originador / generador de los datos</td>
</tr>
<tr>
<td>Número de secuencia de actualización</td>
<td>updateSequenceNumber</td>
<td>Si esta es la primera versión de los datos (0) o una actualización (&gt;0)</td>
</tr>
<tr>
<td>Categoría de datos</td>
<td>dataCategory</td>
<td>El tipo de datos contenidos en el mensaje BUFR, por ejemplo, datos de superficie. Ver <a href="https://github.com/wmo-im/BUFR4/blob/master/BUFR_TableA_en.csv">Tabla A de BUFR</a></td>
</tr>
<tr>
<td>Subcategoría de datos internacionales</td>
<td>internationalDataSubCategory</td>
<td>El subtipo de datos contenidos en el mensaje BUFR, por ejemplo, datos de superficie. Ver <a href="https://github.com/wmo-im/CCT/blob/master/C13.csv">Tabla de Códigos Comunes C-13</a></td>
</tr>
<tr>
<td>Año</td>
<td>typicalYear (typicalDate)</td>
<td>El tiempo más típico para los contenidos del mensaje BUFR</td>
</tr>
<tr>
<td>Mes</td>
<td>typicalMonth (typicalDate)</td>
<td>El tiempo más típico para los contenidos del mensaje BUFR</td>
</tr>
<tr>
<td>Día</td>
<td>typicalDay (typicalDate)</td>
<td>El tiempo más típico para los contenidos del mensaje BUFR</td>
</tr>
<tr>
<td>Hora</td>
<td>typicalHour (typicalTime)</td>
<td>El tiempo más típico para los contenidos del mensaje BUFR</td>
</tr>
<tr>
<td>Minuto</td>
<td>typicalMinute (typicalTime)</td>
<td>El tiempo más típico para los contenidos del mensaje BUFR</td>
</tr>
<tr>
<td>Descriptores BUFR</td>
<td>unexpandedDescriptors</td>
<td>Lista de uno o más descriptores BUFR que definen los datos contenidos en el archivo</td>
</tr>
</tbody>
</table>
<p>Descarga el archivo de ejemplo directamente en el contenedor de gestión de wis2box usando el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>curl https://training.wis2box.wis.wmo.int/sample-data/bufr-cli-ex1.bufr4 --output bufr-cli-ex1.bufr4
</code></pre></div>
<p>Ahora usa el siguiente comando para ejecutar <code>bufr_ls</code> en este archivo:</p>
<div class="highlight"><pre><span></span><code>bufr_ls<span class="w"> </span>bufr-cli-ex1.bufr4
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>bufr-cli-ex1.bufr4
centre<span class="w">                     </span>masterTablesVersionNumber<span class="w">  </span>localTablesVersionNumber<span class="w">   </span>typicalDate<span class="w">                </span>typicalTime<span class="w">                </span>numberOfSubsets
cnmc<span class="w">                       </span><span class="m">29</span><span class="w">                         </span><span class="m">0</span><span class="w">                          </span><span class="m">20231002</span><span class="w">                   </span><span class="m">000000</span><span class="w">                     </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>messages<span class="w"> </span><span class="k">in</span><span class="w"> </span>bufr-cli-ex1.bufr4

<span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>total<span class="w"> </span>messages<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>files
</code></pre></div>
<p>Por sí sola, esta información no es muy informativa, ya que solo proporciona información limitada sobre el contenido del archivo.</p>
<p>La salida predeterminada no proporciona información sobre el tipo de observación o datos y está en un formato que no es muy fácil de leer. Sin embargo, se pueden pasar varias opciones a <code>bufr_ls</code> para cambiar tanto el formato como los campos de encabezado impresos.</p>
<p>Usa <code>bufr_ls</code> sin ningún argumento para ver las opciones:</p>
<div class="highlight"><pre><span></span><code>bufr_ls
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>NAME    bufr_ls

DESCRIPTION
        List content of BUFR files printing values of some header keys.
        Only scalar keys can be printed.
        It does not fail when a key is not found.

USAGE
        bufr_ls [options] bufr_file bufr_file ...

OPTIONS
        -p key[:{s|d|i}],key[:{s|d|i}],...
                Declaration of keys to print.
                For each key a string (key:s), a double (key:d) or an integer (key:i)
                type can be requested. Default type is string.
        -F format
                C style format for floating-point values.
        -P key[:{s|d|i}],key[:{s|d|i}],...
                As -p adding the declared keys to the default list.
        -w key[:{s|d|i}]{=|!=}value,key[:{s|d|i}]{=|!=}value,...
                Where clause.
                Messages are processed only if they match all the key/value constraints.
                A valid constraint is of type key=value or key!=value.
                For each key a string (key:s), a double (key:d) or an integer (key:i)
                type can be specified. Default type is string.
                In the value you can also use the forward-slash character &#39;/&#39; to specify an OR condition (i.e. a logical disjunction)
                Note: only one -w clause is allowed.
        -j      JSON output
        -s key[:{s|d|i}]=value,key[:{s|d|i}]=value,...
                Key/values to set.
                For each key a string (key:s), a double (key:d) or an integer (key:i)
                type can be defined. By default the native type is set.
        -n namespace
                All the keys belonging to the given namespace are printed.
        -m      Mars keys are printed.
        -V      Version.
        -W width
                Minimum width of each column in output. Default is 10.
        -g      Copy GTS header.
        -7      Does not fail when the message has wrong length

SEE ALSO
        Full documentation and examples at:
        &lt;https://confluence.ecmwf.int/display/ECC/bufr_ls&gt;
</code></pre></div>
<p>Ahora ejecuta el mismo comando en el archivo de ejemplo pero muestra la información en formato JSON.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué bandera pasas al comando <code>bufr_ls</code> para ver la salida en formato JSON?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Puedes cambiar el formato de salida a json usando la bandera <code>-j</code>, es decir,
<code>bufr_ls -j &lt;archivo-de-entrada&gt;</code>. Esto puede ser más legible que el formato de salida predeterminado. Vea el ejemplo de salida a continuación:</p>
<div class="highlight"><pre><span></span><code>{ &quot;messages&quot; : [
  {
    &quot;centre&quot;: &quot;cnmc&quot;,
    &quot;masterTablesVersionNumber&quot;: 29,
    &quot;localTablesVersionNumber&quot;: 0,
    &quot;typicalDate&quot;: 20231002,
    &quot;typicalTime&quot;: &quot;000000&quot;,
    &quot;numberOfSubsets&quot;: 1
  }
]}
</code></pre></div>
</details>
<p>Al examinar un archivo BUFR, a menudo queremos determinar el tipo de datos contenidos en el archivo y la fecha/hora típica de los datos en el archivo. Esta información se puede listar usando la bandera <code>-p</code> para seleccionar los encabezados a mostrar. Se pueden incluir múltiples encabezados usando una lista separada por comas.</p>
<p>Usando el comando <code>bufr_ls</code>, inspecciona el archivo de prueba e identifica el tipo de datos contenidos en el archivo y la fecha y hora típicas para esos datos.</p>
<details class="hint">
<summary>Hint</summary>
<p>Las claves ecCodes están dadas en la tabla anterior. Podemos usar lo siguiente para listar la dataCategory y
internationalDataSubCategory de los datos BUFR:</p>
<div class="highlight"><pre><span></span><code>bufr_ls -p dataCategory,internationalDataSubCategory bufr-cli-ex1.bufr4
</code></pre></div>
<p>Se pueden agregar claves adicionales según sea necesario.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué tipo de datos (categoría de datos y subcategoría) están contenidos en el archivo? ¿Cuál es la fecha y hora típicas para los datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El comando que necesitabas ejecutar debería haber sido similar a:</p>
<div class="highlight"><pre><span></span><code>bufr_ls -p dataCategory,internationalDataSubCategory,typicalDate,typicalTime -j bufr-cli-ex1.bufr4
</code></pre></div>
<p>Es posible que hayas agregado claves adicionales o listado el año, mes, día, etc. individualmente. La salida debería
ser similar a la siguiente, dependiendo de si seleccionaste la salida JSON o la predeterminada.</p>
<div class="highlight"><pre><span></span><code>{ &quot;messages&quot; : [
  {
    &quot;dataCategory&quot;: 2,
    &quot;internationalDataSubCategory&quot;: 4,
    &quot;typicalDate&quot;: 20231002,
    &quot;typicalTime&quot;: &quot;000000&quot;
  }
]}
</code></pre></div>
<p>De esto vemos que:</p>
<ul>
<li>La categoría de datos es 2, de <a href="https://github.com/wmo-im/BUFR4/blob/master/BUFR_TableA_en.csv">Tabla A de BUFR</a>
  podemos ver que este archivo contiene datos de "sondeos verticales (otros que no son de satélite)".</li>
<li>La subcategoría internacional es 4, indicando
  "informes de temperatura/humedad/viento de nivel superior de estaciones terrestres fijas (TEMP)" datos. Esta información se puede buscar
  en <a href="https://github.com/wmo-im/CCT/blob/master/C13.csv">Tabla de Códigos Comunes C-13</a> (fila 33). Nota la combinación
  de categoría y subcategoría.</li>
<li>La fecha y hora típicas son 2023/10/02 y 00:00:00z respectivamente.</li>
</ul>
</details>
<h3 id="ejercicio-2-bufr_dump">Ejercicio 2 - bufr_dump</h3>
<p>El comando <code>bufr_dump</code> se puede usar para listar y examinar los contenidos de un archivo BUFR, incluidos los datos en sí.</p>
<p>En este ejercicio usaremos un archivo BUFR que es el mismo que creaste durante la sesión práctica inicial de csv2bufr usando el wis2box-webapp.</p>
<p>Descarga el archivo de muestra al contenedor de gestión de wis2box directamente con el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>curl https://training.wis2box.wis.wmo.int/sample-data/bufr-cli-ex2.bufr4 --output bufr-cli-ex2.bufr4
</code></pre></div>
<p>Ahora ejecuta el comando <code>bufr_dump</code> en el archivo, usando la bandera <code>-p</code> para mostrar los datos en texto plano (formato clave=valor):</p>
<div class="highlight"><pre><span></span><code>bufr_dump -p bufr-cli-ex2.bufr4
</code></pre></div>
<p>Deberías ver alrededor de 240 claves en la salida, muchas de las cuales están ausentes. Esto es típico con datos del mundo real ya que no todas las claves de eccodes están pobladas con datos reportados.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Los valores faltantes se pueden filtrar usando herramientas como <code>grep</code>:
<div class="highlight"><pre><span></span><code>bufr_dump -p bufr-cli-ex2.bufr4 | grep -v MISSING
</code></pre></div></p>
</div>
<p>El archivo BUFR de ejemplo para este ejercicio proviene de la sesión práctica de csv2bufr. Por favor, descarga el archivo CSV original en tu ubicación actual de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>curl https://training.wis2box.wis.wmo.int/sample-data/csv2bufr-ex1.csv --output csv2bufr-ex1.csv
</code></pre></div>
<p>Y muestra el contenido del archivo con:</p>
<div class="highlight"><pre><span></span><code>more csv2bufr-ex1.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Usa el siguiente comando para mostrar la columna 18 en el archivo CSV y encontrarás la presión media del nivel del mar reportada (msl_pressure):</p>
<div class="highlight"><pre><span></span><code>more csv2bufr-ex1.csv | cut -d &#39;,&#39; -f 18
</code></pre></div>
<p>¿Qué clave en la salida BUFR corresponde a la presión media del nivel del mar?</p>
</div>
<details class="hint">
<summary>Hint</summary>
<p>Herramientas como <code>grep</code> se pueden usar en combinación con <code>bufr_dump</code>. Por ejemplo:</p>
<div class="highlight"><pre><span></span><code>bufr_dump -p bufr-cli-ex2.bufr4 | grep -i &quot;pressure&quot;
</code></pre></div>
<p>filtraría los contenidos de <code>bufr_dump</code> solo a esas líneas que contienen la palabra presión. Alternativamente,
la salida podría filtrarse en un valor.</p>
</details>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La clave "pressureReducedToMeanSeaLevel" corresponde a la columna msl_pressure en el archivo CSV de entrada.</p>
</details>
<p>Pasa unos minutos examinando el resto de la salida, comparándola con el archivo CSV de entrada antes de pasar al siguiente
ejercicio. Por ejemplo, puedes intentar encontrar las claves en la salida BUFR que corresponden a la humedad relativa (columna 23 en el archivo CSV) y la temperatura del aire (columna 21 en el archivo CSV).</p>
<h3 id="ejercicio-3-archivos-de-mapeo-csv2bufr">Ejercicio 3 - archivos de mapeo csv2bufr</h3>
<p>La herramienta csv2bufr se puede configurar para procesar datos tabulares con diferentes columnas y secuencias BUFR.</p>
<p>Esto se hace mediante un archivo de configuración escrito en formato JSON.</p>
<p>Al igual que los datos BUFR en sí, el archivo JSON contiene una sección de encabezado y una sección de datos, que corresponden ampliamente a las mismas secciones en BUFR.</p>
<p>Además, algunas opciones de formato se especifican dentro del archivo JSON.</p>
<p>El archivo JSON para el mapeo predeterminado se puede ver a través del enlace a continuación (haz clic derecho y abre en una nueva pestaña):</p>
<p><a href="https://raw.githubusercontent.com/wmo-im/csv2bufr/main/csv2bufr/templates/resources/aws-template.json">aws-template.json</a></p>
<p>Examina la sección <code>header</code> del archivo de mapeo (mostrada a continuación) y compárala con la tabla del ejercicio 1 (columna de clave ecCodes):</p>
<div class="highlight"><pre><span></span><code>&quot;header&quot;:[
    {&quot;eccodes_key&quot;: &quot;edition&quot;, &quot;value&quot;: &quot;const:4&quot;},
    {&quot;eccodes_key&quot;: &quot;masterTableNumber&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;bufrHeaderCentre&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;bufrHeaderSubCentre&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;updateSequenceNumber&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;dataCategory&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;internationalDataSubCategory&quot;, &quot;value&quot;: &quot;const:2&quot;},
    {&quot;eccodes_key&quot;: &quot;masterTablesVersionNumber&quot;, &quot;value&quot;: &quot;const:30&quot;},
    {&quot;eccodes_key&quot;: &quot;numberOfSubsets&quot;, &quot;value&quot;: &quot;const:1&quot;},
    {&quot;eccodes_key&quot;: &quot;observedData&quot;, &quot;value&quot;: &quot;const:1&quot;},
    {&quot;eccodes_key&quot;: &quot;compressedData&quot;, &quot;value&quot;: &quot;const:0&quot;},
    {&quot;eccodes_key&quot;: &quot;typicalYear&quot;, &quot;value&quot;: &quot;data:year&quot;},
    {&quot;eccodes_key&quot;: &quot;typicalMonth&quot;, &quot;value&quot;: &quot;data:month&quot;},
    {&quot;eccodes_key&quot;: &quot;typicalDay&quot;, &quot;value&quot;: &quot;data:day&quot;},
    {&quot;eccodes_key&quot;: &quot;typicalHour&quot;, &quot;value&quot;: &quot;data:hour&quot;},
    {&quot;eccodes_key&quot;: &quot;typicalMinute&quot;, &quot;value&quot;: &quot;data:minute&quot;},
    {&quot;eccodes_key&quot;: &quot;unexpandedDescriptors&quot;, &quot;value&quot;:&quot;array:301150, 307096&quot;}
],
</code></pre></div>
<p>Aquí puedes ver los mismos encabezados que están disponibles en la salida del</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>